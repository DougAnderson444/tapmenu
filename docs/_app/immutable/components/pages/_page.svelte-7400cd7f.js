import{S as Dn,i as kn,s as Cn,e as bi,b as Ce,C as dn,h as _,o as Cu,J as Eu,K as vi,L as xa,k as te,l as ne,m as re,M as Sa,N as xu,O as Jf,P as Gf,Q as wa,R as Su,x as Rt,y as Pt,z as Lt,f as $e,t as Xe,A as zt,a as ot,q as $t,c as at,r as _t,n as Z,T as Aa,H as J,U as Mn,V as Yf,D as Xf,p as Qf,W as Zf,g as ed,d as td,E as nd,F as rd,G as id,v as Oa,u as sd}from"../../chunks/index-28e05797.js";function pe(n){this.content=n}pe.prototype={constructor:pe,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new pe(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new pe(t)},addToStart:function(n,e){return new pe([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new pe(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new pe(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=pe.from(n),n.size?new pe(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=pe.from(n),n.size?new pe(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=pe.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};pe.from=function(n){if(n instanceof pe)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new pe(e)};function wu(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=wu(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Au(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let u=Au(o.content,a.content,t-1,r-1);if(u)return u}t-=l,r-=l}}class E{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,t-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new E(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new E(r,i)}cutByIndex(e,t){return e==t?E.empty:e==0&&t==this.content.length?this:new E(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new E(i,s)}addToStart(e){return new E([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new E(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return wu(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Au(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ri(0,e);if(e==this.size)return ri(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?ri(r+1,o):ri(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return E.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new E(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return E.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new E(t||e,r)}static from(e){if(!e)return E.empty;if(e instanceof E)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new E([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}E.empty=new E([],0);const Es={index:0,offset:0};function ri(n,e){return Es.index=n,Es.offset=e,Es}function Di(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Di(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Di(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let q=class eo{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Di(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return eo.none;if(e instanceof eo)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};q.none=[];class ki extends Error{}class O{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Tu(this.content,e+this.openStart,t);return r&&new O(r,this.openStart,this.openEnd)}removeBetween(e,t){return new O(Ou(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return O.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new O(E.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new O(e,r,i)}}O.empty=new O(E.empty,0,0);function Ou(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Ou(s.content,e-i-1,t-i-1)))}function Tu(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Tu(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function od(n,e,t){if(t.openStart>n.depth)throw new ki("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ki("Inconsistent open depths");return Mu(n,e,t,0)}function Mu(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=Mu(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return an(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=ad(t,n);return an(s,Fu(n,o,a,e,r))}else return an(s,Ci(n,e,r))}function Nu(n,e){if(!e.type.compatibleContent(n.type))throw new ki("Cannot join "+e.type.name+" onto "+n.type.name)}function to(n,e,t){let r=n.node(t);return Nu(r,e.node(t)),r}function on(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function kr(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(on(n.nodeAfter,r),s++));for(let a=s;a<o;a++)on(i.child(a),r);e&&e.depth==t&&e.textOffset&&on(e.nodeBefore,r)}function an(n,e){return n.type.checkContent(e),n.copy(e)}function Fu(n,e,t,r,i){let s=n.depth>i&&to(n,e,i+1),o=r.depth>i&&to(t,r,i+1),a=[];return kr(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(Nu(s,o),on(an(s,Fu(n,e,t,r,i+1)),a)):(s&&on(an(s,Ci(n,e,i+1)),a),kr(e,t,i,a),o&&on(an(o,Ci(t,r,i+1)),a)),kr(r,null,i,a),new E(a)}function Ci(n,e,t){let r=[];if(kr(null,n,t,r),n.depth>t){let i=to(n,e,t+1);on(an(i,Ci(n,e,t+1)),r)}return kr(e,null,t,r),new E(r)}function ad(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(E.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Br{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return q.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Ei(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new Br(t,r,s)}static resolveCached(e,t){for(let i=0;i<xs.length;i++){let s=xs[i];if(s.pos==t&&s.doc==e)return s}let r=xs[Ss]=Br.resolve(e,t);return Ss=(Ss+1)%ld,r}}let xs=[],Ss=0,ld=12;class Ei{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ud=Object.create(null);let ln=class no{constructor(e,t,r,i=q.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||E.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Di(this.attrs,t||e.defaultAttrs||ud)&&q.sameSet(this.marks,r||q.none)}copy(e=null){return e==this.content?this:new no(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new no(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return O.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new O(u,i.depth-o,s.depth-o)}replace(e,t,r){return od(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Br.resolveCached(this,e)}resolveNoCache(e){return Br.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Bu(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=E.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=q.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!q.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=E.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};ln.prototype.text=void 0;class xi extends ln{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bu(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xi(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xi(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Bu(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class hn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new cd(e,t);if(r.next==null)return hn.empty;let i=Iu(r);r.next&&r.err("Unexpected trailing text");let s=yd(gd(i));return bd(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return E.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:f}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,a.concat(c));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}hn.empty=new hn(!0);class cd{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Iu(n){let e=[];do e.push(fd(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function fd(n){let e=[];do e.push(dd(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function dd(n){let e=md(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=hd(n,e);else break;return e}function Ta(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function hd(n,e){let t=Ta(n),r=t;return n.eat(",")&&(n.next!="}"?r=Ta(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function pd(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function md(n){if(n.eat("(")){let e=Iu(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=pd(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gd(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=t();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=t();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Ru(n,e){return e-n}function Ma(n,e){let t=[];return r(e),t.sort(Ru);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function yd(n){let e=Object.create(null);return t(Ma(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);Ma(n,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new hn(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Ru);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function bd(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Pu(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Lu(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function zu(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new vd(n[t]);return e}let Na=class $u{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=zu(r.attrs),this.defaultAttrs=Pu(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==hn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Lu(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ln(this,this.computeAttrs(e),E.from(t),q.setFrom(r))}createChecked(e=null,t,r){return t=E.from(t),this.checkContent(t),new ln(this,this.computeAttrs(e),t,q.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=E.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(E.empty,!0);return s?new ln(this,e,t.append(s),q.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:q.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new $u(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class vd{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class rs{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=zu(i.attrs),this.excluded=null;let s=Pu(this.attrs);this.instance=s?new q(this,s):null}create(e=null){return!e&&this.instance?this.instance:new q(this,Lu(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new rs(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Dd{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=pe.from(e.nodes),t.marks=pe.from(e.marks||{}),this.nodes=Na.compile(this.spec.nodes,this),this.marks=rs.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=hn.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?Fa(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Fa(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Na){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new xi(r,r.defaultAttrs,e,q.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ln.fromJSON(this,e)}markFromJSON(e){return q.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Fa(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class Kn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new Ia(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ia(this,t,!0);return r.addAll(e,t.from,t.to),O.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Ed(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ra(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ra(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Kn(e,Kn.schemaRules(e)))}}const _u={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kd={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ju={ol:!0,ul:!0},Si=1,wi=2,Cr=4;function Ba(n,e,t){return e!=null?(e?Si:0)|(e==="full"?wi:0):n&&n.whitespace=="pre"?Si|wi:t&~Cr}class ii{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=q.none,this.stashMarks=[],this.match=o||(a&Cr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(E.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Si)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=E.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(E.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Sd(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_u.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ia{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=Ba(null,t.preserveWhitespace,0)|(r?Cr:0);i?s=new ii(i.type,i.attrs,q.none,q.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new ii(null,null,q.none,q.none,!0,null,o):s=new ii(e.schema.topNodeType,null,q.none,q.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style");if(!t)this.addElement(e);else{let r=this.readStyles(xd(t));if(!r)return;let[i,s]=r,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);this.addElement(e);for(let a=0;a<i.length;a++)this.removePendingMark(i[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&wi||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&Si)r.options&wi?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;ju.hasOwnProperty(r)&&this.parser.normalizeLists&&Cd(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:kd.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(_u.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,s.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=q.none,r=q.none;e:for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)continue e;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=Ba(e,i,s.options);s.options&Cr&&s.content.length==0&&(o|=Cr),this.nodes.push(new ii(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=t[a];if(u==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=wd(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}}function Cd(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ju.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Ed(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function xd(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function Ra(n){let e={};for(let t in n)e[t]=n[t];return e}function Sd(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}function wd(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class lt{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ws(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,t);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=lt.renderSpec(ws(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&lt.renderSpec(ws(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let c in l)if(l[c]!=null){let f=c.indexOf(" ");f>0?a.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):a.setAttribute(c,l[c])}}for(let c=u;c<t.length;c++){let f=t[c];if(f===0){if(c<t.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:h}=lt.renderSpec(e,f,r);if(a.appendChild(d),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new lt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Pa(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Pa(e.marks)}}function Pa(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ws(n){return n.document||window.document}const Hu=65535,Vu=Math.pow(2,16);function Ad(n,e){return n+e*Vu}function La(n){return n&Hu}function Od(n){return(n-(n&Hu))/Vu}const Wu=1,qu=2,fi=4,Ku=8;class ro{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Ku)>0}get deletedBefore(){return(this.delInfo&(Wu|fi))>0}get deletedAfter(){return(this.delInfo&(qu|fi))>0}get deletedAcross(){return(this.delInfo&fi)>0}}class ze{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ze.empty)return ze.empty}recover(e){let t=0,r=La(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Od(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],c=this.ranges[a+o],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:t:t,h=l+i+(d<0?0:c);if(r)return h;let p=e==(t<0?l:f)?null:Ad(a/3,e-l),m=e==l?qu:e==f?Wu:fi;return(t<0?e!=l:e!=f)&&(m|=Ku),new ro(h,m,p)}i+=c-u}return r?e+i:new ro(e+i,0,null)}touches(e,t){let r=0,i=La(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+s],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+t],c=this.ranges[i+r];e(a,a+u,l,l+c),s+=c-u}}invert(){return new ze(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ze.empty:new ze(e<0?[0,-e,0]:[0,0,e])}}ze.empty=new ze([]);class Hn{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new Hn(this.maps,this.mirror,e,t)}copy(){return new Hn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Hn;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new ro(e,i,null)}}const As=Object.create(null);class Fe{getMap(){return ze.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=As[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in As)throw new RangeError("Duplicate use of step JSON ID "+e);return As[e]=t,t.prototype.jsonID=e,t}}class ae{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ae(e,null)}static fail(e){return new ae(null,e)}static fromReplace(e,t,r,i){try{return ae.ok(e.replace(t,r,i))}catch(s){if(s instanceof ki)return ae.fail(s.message);throw s}}}function Bo(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Bo(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return E.fromArray(r)}class Ft extends Fe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new O(Bo(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return ae.fromReplace(e,this.from,this.to,s)}invert(){return new ut(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ft(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ft&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ft(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ft(t.from,t.to,e.markFromJSON(t.mark))}}Fe.jsonID("addMark",Ft);class ut extends Fe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new O(Bo(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return ae.fromReplace(e,this.from,this.to,r)}invert(){return new Ft(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ut(t.pos,r.pos,this.mark)}merge(e){return e instanceof ut&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ut(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ut(t.from,t.to,e.markFromJSON(t.mark))}}Fe.jsonID("removeMark",ut);class Bt extends Fe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ae.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ae.fromReplace(e,this.pos,this.pos+1,new O(E.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Bt(this.pos,t.marks[i]);return new Bt(this.pos,this.mark)}}return new Un(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Bt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Bt(t.pos,e.markFromJSON(t.mark))}}Fe.jsonID("addNodeMark",Bt);class Un extends Fe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ae.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ae.fromReplace(e,this.pos,this.pos+1,new O(E.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Bt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Un(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Un(t.pos,e.markFromJSON(t.mark))}}Fe.jsonID("removeNodeMark",Un);class ve extends Fe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&io(e,this.from,this.to)?ae.fail("Structure replace would overwrite content"):ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ze([this.from,this.to-this.from,this.slice.size])}invert(e){return new ve(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ve(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ve)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?O.empty:new O(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ve(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?O.empty:new O(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ve(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ve(t.from,t.to,O.fromJSON(e,t.slice),!!t.structure)}}Fe.jsonID("replace",ve);class fe extends Fe{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(io(e,this.from,this.gapFrom)||io(e,this.gapTo,this.to)))return ae.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?ae.fromReplace(e,this.from,this.to,r):ae.fail("Content does not fit in gap")}getMap(){return new ze([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fe(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new fe(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fe(t.from,t.to,t.gapFrom,t.gapTo,O.fromJSON(e,t.slice),t.insert,!!t.structure)}}Fe.jsonID("replaceAround",fe);function io(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Td(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,t),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:i.push(o=new ut(d,h,f[m])));a&&a.to==d?a.to=h:s.push(a=new Ft(d,h,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function Md(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof rs){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,t);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=u,d.step=s):i.push({style:f,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>n.step(new ut(o.from,o.to,o.style)))}function Nd(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),u=o+l.nodeSize,c=r.matchType(l.type);if(!c)s.push(new ve(o,u,O.empty));else{r=c;for(let f=0;f<l.marks.length;f++)t.allowsMarkType(l.marks[f].type)||n.step(new ut(o,u,l.marks[f]))}o=u}if(!r.validEnd){let a=r.fillBefore(E.empty,!0);n.replace(o,o,new O(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function Fd(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ir(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!Fd(i,s,o))break}return null}function Bd(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,u=a,c=E.empty,f=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,c=E.from(r.node(p).copy(c)),f++):l--;let d=E.empty,h=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=E.from(i.node(p).copy(d)),h++):u++;n.step(new fe(l,u,o,a,new O(c.append(d),f,h),c.size-f,!0))}function Io(n,e,t=null,r=n){let i=Id(n,e),s=i&&Rd(r,e);return s?i.map(za).concat({type:e,attrs:t}).concat(s.map(za)):null}function za(n){return{type:n,attrs:null}}function Id(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function Rd(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(t.child(u).type);return!l||!l.validEnd?null:o}function Pd(n,e,t){let r=E.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=E.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new fe(i,s,i,s,new O(r,0,0),t.length,!0))}function Ld(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&zd(n.doc,n.mapping.slice(s).map(a),r)){n.clearIncompatible(n.mapping.slice(s).map(a,1),r);let l=n.mapping.slice(s),u=l.map(a,1),c=l.map(a+o.nodeSize,1);return n.step(new fe(u,c,u+1,c-1,new O(E.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function zd(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function $d(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new fe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new O(E.from(o),0,0),1,!0))}function Vn(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>s;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[c]||f;if(p!=f&&(h=h.replaceChild(0,p.type.create(p.attrs))),!f.canReplace(d+1,f.childCount)||!p.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function _d(n,e,t=1,r){let i=n.doc.resolve(e),s=E.empty,o=E.empty;for(let a=i.depth,l=i.depth-t,u=t-1;a>l;a--,u--){s=E.from(i.node(a).copy(s));let c=r&&r[u];o=E.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}n.step(new ve(e,e,new O(s.append(o),t,t),!0))}function Kt(n,e){let t=n.resolve(e),r=t.index();return Uu(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Uu(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Ju(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&Uu(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function jd(n,e,t){let r=new ve(e-t,e+t,O.empty,!0);n.step(r)}function Hd(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Gu(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Ro(n,e,t=e,r=O.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Yu(i,s,r)?new ve(e,t,r):new Vd(i,s,r).fit()}function Yu(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Vd{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=E.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=E.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new O(s,o,a);return e>-1?new fe(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new ve(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Os(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(t==1&&(o?u.matchType(o.type)||(f=u.fillBefore(E.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(t==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Os(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new O(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Os(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new O(br(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new O(br(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let m=a.child(u),y=f.matchType(m.type);if(!y)break;u++,(u>1||l==0||m.content.size)&&(f=y,c.push(Xu(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=vr(this.placed,t,E.from(c)),this.frontier[t].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<h;m++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=p?e==0?O.empty:new O(br(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new O(br(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ts(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Ts(e,t,i,r,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Ts(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=vr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=vr(this.placed,this.depth,E.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(E.empty,!0);t.childCount&&(this.placed=vr(this.placed,this.frontier.length,t))}}function br(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(br(n.firstChild.content,e-1,t)))}function vr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(vr(n.lastChild.content,e-1,t)))}function Os(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Xu(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Xu(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(E.empty,!0)))),n.copy(r)}function Ts(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Wd(t,s.content,o)?a:null}function Wd(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function qd(n){return n.spec.defining||n.spec.definingForContent}function Kd(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Yu(i,s,r))return n.step(new ve(e,t,r));let o=Zu(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==h&&o.splice(1,0,-d)}let l=o.indexOf(a),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(u.push(p),h==r.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=u[d].type,p=qd(h);if(p&&i.node(l).type!=h)c=d;else if(p||!h.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<o.length;m++){let y=o[(m+l)%o.length],b=!0;y<0&&(b=!1,y=-y);let v=i.node(y-1),C=i.index(y-1);if(v.canReplaceWith(C,C,p.type,p.marks))return n.replace(i.before(y),b?s.after(y):t,new O(Qu(r.content,0,r.openStart,h),h,r.openEnd))}}let f=n.steps.length;for(let d=o.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),t=s.after(h))}}function Qu(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Qu(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(E.empty,!0))}return n}function Ud(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Hd(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new O(E.from(r),0,0))}function Jd(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=Zu(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o)return n.delete(r.before(o),t);n.delete(e,t)}function Zu(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class Wn extends Fe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return ae.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return ae.fromReplace(e,this.pos,this.pos+1,new O(E.from(i),0,t.isLeaf?0:1))}getMap(){return ze.empty}invert(e){return new Wn(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Wn(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Wn(t.pos,t.attr,t.value)}}Fe.jsonID("attr",Wn);let Jn=class extends Error{};Jn=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Jn.prototype=Object.create(Error.prototype);Jn.prototype.constructor=Jn;Jn.prototype.name="TransformError";class ec{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Hn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Jn(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=O.empty){let i=Ro(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new O(E.from(r),0,0))}delete(e,t){return this.replace(e,t,O.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Kd(this,e,t,r),this}replaceRangeWith(e,t,r){return Ud(this,e,t,r),this}deleteRange(e,t){return Jd(this,e,t),this}lift(e,t){return Bd(this,e,t),this}join(e,t=1){return jd(this,e,t),this}wrap(e,t){return Pd(this,e,t),this}setBlockType(e,t=e,r,i=null){return Ld(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return $d(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Wn(e,t,r)),this}addNodeMark(e,t){return this.step(new Bt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof q)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Un(e,t)),this}split(e,t=1,r){return _d(this,e,t,r),this}addMark(e,t,r){return Td(this,e,t,r),this}removeMark(e,t,r){return Md(this,e,t,r),this}clearIncompatible(e,t,r){return Nd(this,e,t,r),this}}const Ms=Object.create(null);class P{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Gd(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=O.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(s);e.replaceRange(c.map(l.pos),c.map(u.pos),a?O.empty:t),a==0&&ja(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),ja(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new z(e):Nn(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Nn(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Nn(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Qe(e.node(0))}static atStart(e){return Nn(e,e,0,0,1)||new Qe(e)}static atEnd(e){return Nn(e,e,e.content.size,e.childCount,-1)||new Qe(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ms[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ms)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ms[e]=t,t.prototype.jsonID=e,t}getBookmark(){return z.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class Gd{constructor(e,t){this.$from=e,this.$to=t}}let $a=!1;function _a(n){!$a&&!n.parent.inlineContent&&($a=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class z extends P{constructor(e,t=e){_a(e),_a(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return P.near(r);let i=e.resolve(t.map(this.anchor));return new z(i.parent.inlineContent?i:r,r)}replace(e,t=O.empty){if(super.replace(e,t),t==O.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof z&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new is(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new z(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=P.findFrom(t,r,!0)||P.findFrom(t,-r,!0);if(s)t=s.$head;else return P.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(P.findFrom(e,-r,!0)||P.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new z(e,t)}}P.jsonID("text",z);class is{constructor(e,t){this.anchor=e,this.head=t}map(e){return new is(e.map(this.anchor),e.map(this.head))}resolve(e){return z.between(e.resolve(this.anchor),e.resolve(this.head))}}class F extends P{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?P.near(s):new F(s)}content(){return new O(E.from(this.node),0,0)}eq(e){return e instanceof F&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Po(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new F(e.resolve(t.anchor))}static create(e,t){return new F(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}F.prototype.visible=!1;P.jsonID("node",F);class Po{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new is(r,r):new Po(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&F.isSelectable(r)?new F(t):P.near(t)}}class Qe extends P{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=O.empty){if(t==O.empty){e.delete(0,e.doc.content.size);let r=P.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Qe(e)}map(e){return new Qe(e)}eq(e){return e instanceof Qe}getBookmark(){return Yd}}P.jsonID("all",Qe);const Yd={map(){return this},resolve(n){return new Qe(n)}};function Nn(n,e,t,r,i,s=!1){if(e.inlineContent)return z.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&F.isSelectable(a))return F.create(n,t-(i<0?a.nodeSize:0))}else{let l=Nn(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function ja(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof ve||i instanceof fe))return;let s=n.mapping.maps[r],o;s.forEach((a,l,u,c)=>{o==null&&(o=c)}),n.setSelection(P.near(n.doc.resolve(o),t))}const Ha=1,si=2,Va=4;class Xd extends ec{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ha)&~si,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ha)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=si,this}ensureMarks(e){return q.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&si)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~si,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||q.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Va,this}get scrolledIntoView(){return(this.updated&Va)>0}}function Wa(n,e){return!e||!n?n:n.bind(e)}class Dr{constructor(e,t,r){this.name=e,this.init=Wa(t.init,r),this.apply=Wa(t.apply,r)}}const Qd=[new Dr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Dr("selection",{init(n,e){return n.selection||P.atStart(e.doc)},apply(n){return n.selection}}),new Dr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Dr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ns{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Qd.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Dr(r.key,r.spec.state,r))})}}class In{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,c=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new In(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new Xd(this)}static create(e){let t=new Ns(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new In(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Ns(this.schema,e.plugins),r=t.fields,i=new In(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ns(e.schema,e.plugins),s=new In(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ln.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=P.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=u.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function tc(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=tc(i,e,{})),t[r]=i}return t}class De{constructor(e){this.spec=e,this.props={},e.props&&tc(e.props,this,this.props),this.key=e.key?e.key.key:nc("plugin")}getState(e){return e[this.key]}}const Fs=Object.create(null);function nc(n){return n in Fs?n+"$"+ ++Fs[n]:(Fs[n]=0,n+"$")}class We{constructor(e="key"){this.key=nc(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ie=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Ir=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let qa=null;const bt=function(n,e,t){let r=qa||(qa=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},pn=function(n,e,t,r){return t&&(Ka(n,e,t,r,-1)||Ka(n,e,t,r,1))},Zd=/^(img|br|input|textarea|hr)$/i;function Ka(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:st(n))){let s=n.parentNode;if(!s||s.nodeType!=1||th(n)||Zd.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ie(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?st(n):0}else return!1}}function st(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function eh(n,e,t){for(let r=e==0,i=e==st(n);r||i;){if(n==t)return!0;let s=Ie(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==st(n)}}function th(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const ss=function(n){return n.focusNode&&pn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function tn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function nh(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}const Wt=typeof navigator<"u"?navigator:null,Ua=typeof document<"u"?document:null,Ut=Wt&&Wt.userAgent||"",so=/Edge\/(\d+)/.exec(Ut),rc=/MSIE \d/.exec(Ut),oo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ut),Te=!!(rc||oo||so),jt=rc?document.documentMode:oo?+oo[1]:so?+so[1]:0,et=!Te&&/gecko\/(\d+)/i.test(Ut);et&&+(/Firefox\/(\d+)/.exec(Ut)||[0,0])[1];const ao=!Te&&/Chrome\/(\d+)/.exec(Ut),Ee=!!ao,rh=ao?+ao[1]:0,xe=!Te&&!!Wt&&/Apple Computer/.test(Wt.vendor),Gn=xe&&(/Mobile\/\w+/.test(Ut)||!!Wt&&Wt.maxTouchPoints>2),Le=Gn||(Wt?/Mac/.test(Wt.platform):!1),Je=/Android \d/.test(Ut),as=!!Ua&&"webkitFontSmoothing"in Ua.documentElement.style,ih=as?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function sh(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function wt(n,e){return typeof n=="number"?n:n[e]}function oh(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ja(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=Ir(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,u=l?sh(s):oh(a),c=0,f=0;if(e.top<u.top+wt(r,"top")?f=-(u.top-e.top+wt(i,"top")):e.bottom>u.bottom-wt(r,"bottom")&&(f=e.bottom-u.bottom+wt(i,"bottom")),e.left<u.left+wt(r,"left")?c=-(u.left-e.left+wt(i,"left")):e.right>u.right-wt(r,"right")&&(c=e.right-u.right+wt(i,"right")),c||f)if(l)s.defaultView.scrollBy(c,f);else{let d=a.scrollLeft,h=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let p=a.scrollLeft-d,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l)break}}function ah(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:ic(n.dom)}}function ic(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Ir(r));return e}function lh({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;sc(t,r==0?0:r-e)}function sc(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Tn=null;function uh(n){if(n.setActive)return n.setActive();if(Tn)return n.focus(Tn);let e=ic(n);n.focus(Tn==null?{get preventScroll(){return Tn={preventScroll:!0},!0}}:void 0),Tn||(Tn=!1,sc(e,0))}function oc(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top;for(let l=n.firstChild,u=0;l;l=l.nextSibling,u++){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=bt(l).getClientRects();else continue;for(let f=0;f<c.length;f++){let d=c[f];if(d.top<=o&&d.bottom>=a){o=Math.max(d.bottom,o),a=Math.min(d.top,a);let h=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(h<r){t=l,r=h,i=h&&t.nodeType==3?{left:d.right<e.left?d.right:d.left,top:e.top}:e,l.nodeType==1&&h&&(s=u+(e.left>=(d.left+d.right)/2?1:0));continue}}!t&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(s=u+1)}}return t&&t.nodeType==3?ch(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:oc(t,i)}function ch(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=At(r,1);if(s.top!=s.bottom&&Lo(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Lo(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function fh(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function dh(n,e,t){let{node:r,offset:i}=oc(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function hh(n,e,t,r){let i=-1;for(let s=e;s!=n.dom;){let o=n.docView.nearestDesc(s,!0);if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)){let a=o.dom.getBoundingClientRect();if(o.node.isBlock&&o.parent&&(a.left>r.left||a.top>r.top?i=o.posBefore:(a.right<r.left||a.bottom<r.top)&&(i=o.posAfter)),!o.contentDOM&&i<0)return(o.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?o.posBefore:o.posAfter}s=o.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function ac(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Lo(e,u))return ac(o,e,u)}}if((s=(s+1)%r)==i)break}return n}function ph(n,e){let t=n.dom.ownerDocument,r,i=0;if(t.caretPositionFromPoint)try{let l=t.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&t.caretRangeFromPoint){let l=t.caretRangeFromPoint(e.left,e.top);l&&({startContainer:r,startOffset:i}=l)}let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let l=n.dom.getBoundingClientRect();if(!Lo(e,l)||(s=ac(n.dom,e,l),!s))return null}if(xe)for(let l=s;r&&l;l=Ir(l))l.draggable&&(r=void 0);if(s=fh(s,e),r){if(et&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],u;l.nodeName=="IMG"&&(u=l.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=hh(n,r,i,e))}o==null&&(o=dh(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function At(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const mh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function lc(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=as||et;if(r.nodeType==3)if(o&&(mh.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=At(bt(r,i,i),t);if(et&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=At(bt(r,i-1,i-1),-1);if(u.top==l.top){let c=At(bt(r,i,i+1),-1);if(c.top!=l.top)return cr(c,c.left<u.left)}}return l}else{let l=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(l--,c=1):t<0?l--:u++,cr(At(bt(r,l,u),1),c<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==st(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Bs(l.getBoundingClientRect(),!1)}if(s==null&&i<st(r)){let l=r.childNodes[i];if(l.nodeType==1)return Bs(l.getBoundingClientRect(),!0)}return Bs(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==st(r))){let l=r.childNodes[i-1],u=l.nodeType==3?bt(l,st(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return cr(At(u,1),!1)}if(s==null&&i<st(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?bt(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return cr(At(u,-1),!0)}return cr(At(r.nodeType==3?bt(r):r,-t),t>=0)}function cr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Bs(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function uc(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function gh(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return uc(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=lc(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=bt(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(t=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const yh=/[\u0590-\u08ac]/;function bh(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return!yh.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:uc(n,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=n.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,f),l&&(l!=c||u!=f)&&a.extend&&a.extend(l,u)}catch{}return d!=null&&(a.caretBidiLevel=d),y})}let Ga=null,Ya=null,Xa=!1;function vh(n,e,t){return Ga==e&&Ya==t?Xa:(Ga=e,Ya=t,Xa=t=="up"||t=="down"?gh(n,e,t):bh(n,e,t))}const Ze=0,Qa=1,Rn=2,ft=3;class Hr{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Ze,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Ie(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof fc){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof cc&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Ie(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Ie(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let c=o+l.border;if(e>=c&&t<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,c);e=o;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Ie(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>t||a==this.children.length-1)){t=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Ie(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,r,i);h=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),u=r.getSelection(),c=!1;if((et||xe)&&e==t){let{node:d,offset:h}=a;if(d.nodeType==3){if(c=!!(h&&d.nodeValue[h-1]==`
`),c&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Ie(m)+1});break}let y=p.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let p=d.childNodes[h-1];c=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(et&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&xe)&&pn(a.node,a.offset,u.anchorNode,u.anchorOffset)&&pn(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==t)&&!c){u.collapse(a.node,a.offset);try{e!=t&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>t){let h=a;a=l,l=h}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?Rn:Qa,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ft:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Rn:ft}r=o}this.dirty=Rn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Rn:Qa;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class cc extends Hr{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Ze&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Dh extends Hr{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class mn extends Hr{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=lt.renderSpec(document,t.type.spec.toDOM(t,r))),new mn(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&ft||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=ft&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Ze){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ze}}slice(e,t,r){let i=mn.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=co(s,t,o,r)),e>0&&(s=co(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class gn extends Hr{constructor(e,t,r,i,s,o,a,l,u){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,o&&this.updateChildren(l,u)}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,u=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=lt.renderSpec(document,t.type.spec.toDOM(t)));!f&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=pc(c,r,t),u?l=new kh(e,t,r,i,c,f||null,d,u,s,o+1):t.isText?new ls(e,t,r,i,c,d,s):new gn(e,t,r,i,c,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>E.empty)}return e}matchesNode(e,t,r){return this.dirty==Ze&&e.eq(this.node)&&uo(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Eh(this,o&&o.node,e);wh(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?q.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,c,f,h,e)||l.updateNextNode(u,c,f,e,d)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Rn)&&(o&&this.protectLocalComposition(e,o),dc(this.contentDOM,this.children,e),Gn&&Ah(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof z)||r<t||i>t+this.node.content.size)return null;let s=e.domSelectionRange(),o=Oh(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=Th(this.node.content,a,r-t,i-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Dh(this,s,t,i);e.input.compositionNodes.push(o),this.children=co(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==ft||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ze}updateOuterDeco(e){if(uo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=hc(this.dom,this.nodeDOM,lo(this.outerDeco,this.node,t),lo(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Za(n,e,t,r,i){return pc(r,e,n),new gn(void 0,n,e,t,r,r,r,i,0)}class ls extends gn{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ft||this.dirty!=Ze&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Ze||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ze,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new ls(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ft)}get domAtom(){return!1}}class fc extends Hr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ze&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class kh extends gn{constructor(e,t,r,i,s,o,a,l,u,c){super(e,t,r,i,s,o,a,u,c),this.spec=l}update(e,t,r,i){if(this.dirty==ft)return!1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function dc(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=el(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof mn){let l=r?r.previousSibling:n.lastChild;dc(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=el(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Er=function(n){n&&(this.nodeName=n)};Er.prototype=Object.create(null);const sn=[new Er];function lo(n,e,t){if(n.length==0)return sn;let r=t?sn[0]:new Er,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new Er(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Er(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function hc(n,e,t,r){if(t==sn&&r==sn)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=sn[0]),i=l}Ch(i,a||sn[0],o)}return i}function Ch(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function pc(n,e,t){return hc(n,n,sn,lo(e,t,n.nodeType!=1))}function uo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function el(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Eh{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=xh(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ze,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=mn.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==ft&&o.dom==o.contentDOM&&(o.dirty=Rn),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof gn){let l=this.preMatch.matched.get(a);if(l!=null&&l!=s)return!1;let u=a.dom;if(!(this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=ft&&uo(t,a.outerDeco)))&&a.update(e,t,r,i))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,r,i,s){this.top.children.splice(this.index++,0,gn.create(this.top,e,t,r,i,s)),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new cc(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof mn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ls)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xe||Ee)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new fc(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function xh(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=t.children[r-1];if(u instanceof mn)t=u,r=u.children.length;else{a=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Sh(n,e){return n.type.side-e.type.side}function wh(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){if(o<i.length&&i[o].to==s){let p=i[o++],m;for(;o<i.length&&i[o].to==s;)(m||(m=[p])).push(i[o++]);if(m){m.sort(Sh);for(let y=0;y<m.length;y++)t(m[y],u,!!l)}else t(p,u,!!l)}let c,f;if(l)f=-1,c=l,l=null;else if(u<n.childCount)f=u,c=n.child(u++);else break;for(let p=0;p<a.length;p++)a[p].to<=s&&a.splice(p--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let d=s+c.nodeSize;if(c.isText){let p=d;o<i.length&&i[o].from<p&&(p=i[o].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<d&&(l=c.cut(p-s),c=c.cut(0,p-s),d=p,f=-1)}let h=c.isInline&&!c.isLeaf?a.filter(p=>!p.inline):a.slice();r(c,h,e.forChild(s,c),f),s=d}}function Ah(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Oh(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=st(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function Th(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let u=n.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=t){let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=t)return a+u;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function co(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],u=a,c=a+=l.size;u>=t||c<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>t&&s.push(l.slice(t-u,l.size,r)))}return s}function zo(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(ss(t)){for(l=a;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&F.isSelectable(c)&&i.parent&&!(c.isInline&&eh(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;u=new F(o==f?a:r.resolve(f))}}else{let c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;l=r.resolve(c)}if(!u){let c=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;u=$o(n,l,a,c)}return u}function mc(n){return n.editable?n.hasFocus():yc(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Ct(n,e=!1){let t=n.state.selection;if(gc(n,t),!!mc(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ee){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&pn(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Nh(n);else{let{anchor:r,head:i}=t,s,o;tl&&!(t instanceof z)&&(t.$from.parent.inlineContent||(s=nl(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=nl(n,t.to))),n.docView.setSelection(r,i,n.root,e),tl&&(s&&rl(s),o&&rl(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Mh(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const tl=xe||Ee&&rh<63;function nl(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(xe&&i&&i.contentEditable=="false")return Is(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Is(i);if(s)return Is(s)}}function Is(n){return n.contentEditable="true",xe&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function rl(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Mh(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!mc(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Nh(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Ie(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Te&&jt<=11&&(r.disabled=!0,r.disabled=!1)}function gc(n,e){if(e instanceof F){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(il(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else il(n)}function il(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function $o(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||z.between(e,t,r)}function sl(n){return n.editable&&!n.hasFocus()?!1:yc(n)}function yc(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Fh(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return pn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function fo(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&P.findFrom(s,e)}function nn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function ol(n,e,t){let r=n.state.selection;if(r instanceof z){if(!r.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let i=fo(n.state,e);return i&&i instanceof F?nn(n,i):!1}else if(!(Le&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?F.isSelectable(s)?nn(n,new F(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):as?nn(n,new z(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(r instanceof F&&r.node.isInline)return nn(n,new z(e>0?r.$to:r.$from));{let i=fo(n.state,e);return i?nn(n,i):!1}}}function Ai(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xr(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function Rs(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(et&&t.nodeType==1&&r<Ai(t)&&xr(t.childNodes[r])&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(xr(a))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(bc(t))break;{let a=t.previousSibling;for(;a&&xr(a);)i=t.parentNode,s=Ie(a),a=a.previousSibling;if(a)t=a,r=Ai(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?ho(n,t,r):i&&ho(n,i,s)}function Ps(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Ai(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(xr(a))s=t,o=++r;else break}else{if(bc(t))break;{let a=t.nextSibling;for(;a&&xr(a);)s=a.parentNode,o=Ie(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=Ai(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&ho(n,s,o)}function bc(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function ho(n,e,t){let r=n.domSelection();if(ss(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Ct(n)},50)}function al(n,e,t){let r=n.state.selection;if(r instanceof z&&!r.empty||t.indexOf("s")>-1||Le&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=fo(n.state,e);if(o&&o instanceof F)return nn(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Qe?P.near(o,e):P.findFrom(o,e);return a?nn(n,a):!1}return!1}function ll(n,e){if(!(n.state.selection instanceof z))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function ul(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Bh(n){if(!xe||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ul(n,r,"true"),setTimeout(()=>ul(n,r,"false"),20)}return!1}function Ih(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Rh(n,e){let t=e.keyCode,r=Ih(e);return t==8||Le&&t==72&&r=="c"?ll(n,-1)||Rs(n):t==46||Le&&t==68&&r=="c"?ll(n,1)||Ps(n):t==13||t==27?!0:t==37||Le&&t==66&&r=="c"?ol(n,-1,r)||Rs(n):t==39||Le&&t==70&&r=="c"?ol(n,1,r)||Ps(n):t==38||Le&&t==80&&r=="c"?al(n,-1,r)||Rs(n):t==40||Le&&t==78&&r=="c"?Bh(n)||al(n,1,r)||Ps(n):r==(Le?"m":"c")&&(t==66||t==73||t==89||t==90)}function vc(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||lt.fromSchema(n.state.schema),a=Sc(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=xc[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=a.createElement(c[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function Dc(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",d=>{e=d(e,s||r,n)}),s)return e?new O(E.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):O.empty;let f=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(f)a=f;else{let d=i.marks(),{schema:h}=n.state,p=lt.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),o=zh(t),as&&$h(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Kn.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Ph.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=_h(cl(a,+c[1],+c[2]),c[4]);else if(a=O.maxOpen(Lh(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=cl(a,f,d)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const Ph=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Lh(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&Cc(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=Ec(o[o.length-1],s.length));let c=kc(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return E.from(o)}return n}function kc(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,E.from(n));return n}function Cc(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=Cc(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(E.from(kc(t,n,i+1))))}}function Ec(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Ec(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(E.empty,!0);return n.copy(t.append(r))}function po(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return i<r-1&&(a=po(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,n.childCount>1||s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(E.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function cl(n,e,t){return e<n.openStart&&(n=new O(po(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new O(po(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const xc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let fl=null;function Sc(){return fl||(fl=document.implementation.createHTMLDocument("title"))}function zh(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Sc().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&xc[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function $h(n){let e=n.querySelectorAll(Ee?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function _h(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=E.from(l.create(r[a+1],i)),s++,o++}return new O(i,s,o)}const Se={},we={},jh={touchstart:!0,touchmove:!0};class Hh{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Vh(n){for(let e in Se){let t=Se[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{qh(n,r)&&!_o(n,r)&&(n.editable||!(r.type in we))&&t(n,r)},jh[e]?{passive:!0}:void 0)}xe&&n.dom.addEventListener("input",()=>null),mo(n)}function It(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Wh(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function mo(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>_o(n,r))})}function _o(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function qh(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Kh(n,e){!_o(n,e)&&Se[e.type]&&(n.editable||!(e.type in we))&&Se[e.type](n,e)}we.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Ac(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Je&&Ee&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Gn&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,tn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Rh(n,t)?t.preventDefault():It(n,"key")};we.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};we.keypress=(n,e)=>{let t=e;if(Ac(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Le&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof z)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function us(n){return{left:n.clientX,top:n.clientY}}function Uh(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function jo(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function qn(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function Jh(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&F.isSelectable(r)?(qn(n,new F(t),"pointer"),!0):!1}function Gh(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof F&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(F.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(qn(n,F.create(n.state.doc,i),"pointer"),!0):!1}function Yh(n,e,t,r,i){return jo(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?Gh(n,t):Jh(n,t))}function Xh(n,e,t,r){return jo(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function Qh(n,e,t,r){return jo(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||Zh(n,t,r)}function Zh(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(qn(n,z.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)qn(n,z.create(r,a+1,a+1+o.content.size),"pointer");else if(F.isSelectable(o))qn(n,F.create(r,a),"pointer");else continue;return!0}}function Ho(n){return Oi(n)}const wc=Le?"metaKey":"ctrlKey";Se.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Ho(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&Uh(t,n.input.lastClick)&&!t[wc]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(us(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new ep(n,o,t,!!r)):(s=="doubleClick"?Xh:Qh)(n,o.pos,o.inside,t)?t.preventDefault():It(n,"pointer"))};class ep{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[wc],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let c=e.state.doc.resolve(t.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof F&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&et&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),It(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ct(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(us(e))),this.updateAllowDefault(e),this.allowDefault||!t?It(this.view,"pointer"):Yh(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xe&&this.mightDrag&&!this.mightDrag.node.isAtom||Ee&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(qn(this.view,P.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):It(this.view,"pointer")}move(e){this.updateAllowDefault(e),It(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Se.touchstart=n=>{n.input.lastTouch=Date.now(),Ho(n),It(n,"pointer")};Se.touchmove=n=>{n.input.lastTouch=Date.now(),It(n,"pointer")};Se.contextmenu=n=>Ho(n);function Ac(n,e){return n.composing?!0:xe&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const tp=Je?5e3:-1;we.compositionstart=we.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Oi(n,!0),n.markCursor=null;else if(Oi(n),et&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}Oc(n,tp)};we.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,Oc(n,20))};function Oc(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Oi(n),e))}function Tc(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=np());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function np(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Oi(n,e=!1){if(!(Je&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Tc(n),e||n.docView&&n.docView.dirty){let t=zo(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function rp(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Yn=Te&&jt<15||Gn&&ih<604;Se.copy=we.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Yn?null:t.clipboardData,o=r.content(),{dom:a,text:l}=vc(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):rp(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ip(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function sp(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Rr(n,r.value,null,n.input.shiftKey,e):Rr(n,r.textContent,r.innerHTML,n.input.shiftKey,e)},50)}function Rr(n,e,t,r,i){let s=Dc(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||O.empty)))return!0;if(!s)return!1;let o=ip(s),a=o?n.state.tr.replaceSelectionWith(o,n.input.shiftKey):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}we.paste=(n,e)=>{let t=e;if(n.composing&&!Je)return;let r=Yn?null:t.clipboardData;r&&Rr(n,r.getData("text/plain"),r.getData("text/html"),n.input.shiftKey,t)?t.preventDefault():sp(n,t)};class op{constructor(e,t){this.slice=e,this.move=t}}const Mc=Le?"altKey":"ctrlKey";Se.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(us(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof F?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(F.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&n.dispatch(n.state.tr.setSelection(F.create(n.state.doc,u.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=vc(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(Yn?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",Yn||t.dataTransfer.setData("text/plain",l),n.dragging=new op(o,!t[Mc])};Se.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};we.dragover=we.dragenter=(n,e)=>e.preventDefault();we.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(us(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=Dc(n,t.dataTransfer.getData(Yn?"Text":"text/plain"),Yn?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[Mc]);if(n.someProp("handleDrop",p=>p(n,t,o||O.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?Gu(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let u=n.state.tr;a&&u.deleteSelection();let c=u.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(d))return;let h=u.doc.resolve(c);if(f&&F.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new F(h));else{let p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,y,b,v)=>p=v),u.setSelection($o(n,h,u.doc.resolve(p)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};Se.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Ct(n)},20))};Se.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Se.beforeinput=(n,e)=>{if(Ee&&Je&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,tn(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in we)Se[n]=we[n];function Pr(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Vo{constructor(e,t){this.toDOM=e,this.spec=t||un,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new _e(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Pr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ht{constructor(e,t){this.attrs=e,this.spec=t||un}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new _e(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ht&&Pr(this.attrs,e.attrs)&&Pr(this.spec,e.spec)}static is(e){return e.type instanceof Ht}destroy(){}}class Wo{constructor(e,t){this.attrs=e,this.spec=t||un}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new _e(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Wo&&Pr(this.attrs,e.attrs)&&Pr(this.spec,e.spec)}destroy(){}}class _e{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new _e(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new _e(e,e,new Vo(t,r))}static inline(e,t,r,i){return new _e(e,t,new Ht(r,i))}static node(e,t,r,i){return new _e(e,t,new Wo(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ht}}const Fn=[],un={};class oe{constructor(e,t){this.local=e.length?e:Fn,this.children=t.length?t:Fn}static create(e,t){return t.length?Ti(t,e,0,un):be}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==be||e.maps.length==0?this:this.mapInner(e,t,0,0,r||un)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?ap(this.children,o||[],e,t,r,i,s):o?new oe(o.sort(cn),Fn):be}add(e,t){return t.length?this==be?oe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let u=l+r,c;if(c=Fc(t,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,u+1):i.splice(s,0,l,l+a.nodeSize,Ti(c,a,u+1,un)),s+=3}});let o=Nc(s?Bc(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new oe(o.length?this.local.concat(o).sort(cn):this.local,i||this.children)}remove(e){return e.length==0||this==be?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>a&&f.to<l&&(e[c]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=be?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new oe(i,r):be}forChild(e,t){if(this==be)return this;if(t.isLeaf)return oe.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ht){let u=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new oe(i.sort(cn),Fn);return r?new Nt([a,r]):a}return r||be}eq(e){if(this==e)return!0;if(!(e instanceof oe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qo(this.localsInner(e))}localsInner(e){if(this==be)return Fn;if(e.inlineContent||!this.local.some(Ht.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ht||t.push(this.local[r]);return t}}oe.empty=new oe([],[]);oe.removeOverlap=qo;const be=oe.empty;class Nt{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,un));return Nt.from(r)}forChild(e,t){if(t.isLeaf)return oe.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=be&&(s instanceof Nt?r=r.concat(s.members):r.push(s))}return Nt.from(r)}eq(e){if(!(e instanceof Nt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?qo(r?t:t.sort(cn)):Fn}static from(e){switch(e.length){case 0:return be;case 1:return e[0];default:return new Nt(e.every(t=>t instanceof oe)?e:e.reduce((t,r)=>t.concat(r instanceof oe?r:r.members),[]))}}}function ap(n,e,t,r,i,s,o){let a=n.slice();for(let u=0,c=s;u<t.maps.length;u++){let f=0;t.maps[u].forEach((d,h,p,m)=>{let y=m-p-(h-d);for(let b=0;b<a.length;b+=3){let v=a[b+1];if(v<0||d>v+c-f)continue;let C=a[b]+c-f;h>=C?a[b+1]=d<=C?-2:-1:p>=i&&y&&(a[b]+=y,a[b+1]+=y)}f+=y}),c=t.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=t.map(n[u]+s),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let d=t.map(n[u+1]+s,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),y=r.maybeChild(p);if(y&&m==f&&m+y.nodeSize==h){let b=a[u+2].mapInner(t,y,c+1,n[u]+s+1,o);b!=be?(a[u]=f,a[u+1]=h,a[u+2]=b):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=lp(a,n,e,t,i,s,o),c=Ti(u,r,0,o);e=c.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new oe(e.sort(cn),a)}function Nc(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new _e(i.from+e,i.to+e,i.type))}return t}function lp(n,e,t,r,i,s,o){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?t.push(f):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function Fc(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function Bc(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ti(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let u=Fc(n,a,l+t);if(u){s=!0;let c=Ti(u,a,t+l+1,r);c!=be&&i.push(l,l+a.nodeSize,c)}});let o=Nc(s?Bc(n):n,-t).sort(cn);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new oe(o,i):be}function cn(n,e){return n.from-e.from||n.to-e.to}function qo(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),dl(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),dl(e,i,r.copy(s.from,r.to)));break}}}return e}function dl(n,e,t){for(;e<n.length&&cn(t,n[e])>0;)e++;n.splice(e,0,t)}function Ls(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=be&&e.push(r)}),n.cursorWrapper&&e.push(oe.create(n.state.doc,[n.cursorWrapper.deco])),Nt.from(e)}const up={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},cp=Te&&jt<=11;class fp{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class dp{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fp,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Te&&jt<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),cp&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,up)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(sl(this.view)){if(this.suppressingSelectionUpdates)return Ct(this.view);if(Te&&jt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&pn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Ir(s))t.add(s);for(let s=e.anchorNode;s;s=Ir(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&sl(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<t.length;c++){let f=this.registerMutation(t[c],l);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(et&&l.length>1){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let f=c[0],d=c[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ss(r)&&(u=zo(e))&&u.eq(P.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ct(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),hp(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ct(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)t.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Te&&jt<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?Ie(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Ie(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let hl=new WeakMap,pl=!1;function hp(n){if(!hl.has(n)&&(hl.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=et,pl)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),pl=!0}}function pp(n){let e;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return pn(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function mp(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),u,c=l.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],ss(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Ee&&n.input.lastKeyCode===8)for(let y=s;y>i;y--){let b=r.childNodes[y-1],v=b.pmViewDesc;if(b.nodeName=="BR"&&!v){s=y;break}if(!v||v.size)break}let f=n.state.doc,d=n.someProp("domParser")||Kn.fromSchema(n.state.schema),h=f.resolve(o),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:gp,context:h});if(u&&u[0].pos!=null){let y=u[0].pos,b=u[1]&&u[1].pos;b==null&&(b=y),p={anchor:y+o,head:b+o}}return{doc:m,sel:p,from:o,to:a}}function gp(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(xe&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||xe&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function yp(n,e,t,r,i){if(e<0){let S=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,I=zo(n,S);if(I&&!n.state.selection.eq(I)){if(Ee&&Je&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",G=>G(n,tn(13,"Enter"))))return;let L=n.state.tr.setSelection(I);S=="pointer"?L.setMeta("pointer",!0):S=="key"&&L.scrollIntoView(),n.dispatch(L)}return}let s=n.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=n.state.doc.resolve(t).after(o+1);let a=n.state.selection,l=mp(n,e,t),u=n.state.doc,c=u.slice(l.from,l.to),f,d;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,d="end"):(f=n.state.selection.from,d="start"),n.input.lastKeyCode=null;let h=Dp(c.content,l.doc.content,l.from,f,d);if((Gn&&n.input.lastIOSEnter>Date.now()-225||Je)&&i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"||S.nodeName=="LI")&&(!h||h.endA>=h.endB)&&n.someProp("handleKeyDown",S=>S(n,tn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof z&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let S=ml(n,n.state.doc,l.sel);S&&!S.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(S))}return}if(Ee&&n.cursorWrapper&&l.sel&&l.sel.anchor==n.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let S=h.endB-h.start;l.sel={anchor:l.sel.anchor+S,head:l.sel.anchor+S}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&h.start==h.endB&&n.state.selection instanceof z&&(h.start>n.state.selection.from&&h.start<=n.state.selection.from+2&&n.state.selection.from>=l.from?h.start=n.state.selection.from:h.endA<n.state.selection.to&&h.endA>=n.state.selection.to-2&&n.state.selection.to<=l.to&&(h.endB+=n.state.selection.to-h.endA,h.endA=n.state.selection.to)),Te&&jt<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let p=l.doc.resolveNoCache(h.start-l.from),m=l.doc.resolveNoCache(h.endB-l.from),y=u.resolve(h.start),b=p.sameParent(m)&&p.parent.inlineContent&&y.end()>=h.endA,v;if((Gn&&n.input.lastIOSEnter>Date.now()-225&&(!b||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!b&&p.pos<l.doc.content.size&&(v=P.findFrom(l.doc.resolve(p.pos+1),1,!0))&&v.head==m.pos)&&n.someProp("handleKeyDown",S=>S(n,tn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>h.start&&vp(u,h.start,h.endA,p,m)&&n.someProp("handleKeyDown",S=>S(n,tn(8,"Backspace")))){Je&&Ee&&n.domObserver.suppressSelectionUpdates();return}Ee&&Je&&h.endB==h.start&&(n.input.lastAndroidDelete=Date.now()),Je&&!b&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,m=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{n.someProp("handleKeyDown",function(S){return S(n,tn(13,"Enter"))})},20));let C=h.start,g=h.endA,x,D,A;if(b){if(p.pos==m.pos)Te&&jt<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ct(n),20)),x=n.state.tr.delete(C,g),D=u.resolve(h.start).marksAcross(u.resolve(h.endA));else if(h.endA==h.endB&&(A=bp(p.parent.content.cut(p.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,h.endA-y.start()))))x=n.state.tr,A.type=="add"?x.addMark(C,g,A.mark):x.removeMark(C,g,A.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let S=p.parent.textBetween(p.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",I=>I(n,C,g,S)))return;x=n.state.tr.insertText(S,C,g)}}if(x||(x=n.state.tr.replace(C,g,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let S=ml(n,x.doc,l.sel);S&&!(Ee&&Je&&n.composing&&S.empty&&(h.start!=h.endB||n.input.lastAndroidDelete<Date.now()-100)&&(S.head==C||S.head==x.mapping.map(g)-1)||Te&&S.empty&&S.head==C)&&x.setSelection(S)}D&&x.ensureMarks(D),n.dispatch(x.scrollIntoView())}function ml(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:$o(n,e.resolve(t.anchor),e.resolve(t.head))}function bp(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<t.length;c++)s=t[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(E.from(u).eq(n))return{mark:a,type:o}}function vp(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||zs(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(zs(s,!0,!0));return!o.parent.isTextblock||o.pos>t||zs(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function zs(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Dp(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}class kp{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Hh,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Dl),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=bl(this),yl(this),this.nodeViews=vl(this),this.docView=Za(this.state.doc,gl(this),Ls(this),this.dom,this),this.domObserver=new dp(this,(r,i,s,o)=>yp(this,r,i,s,o)),this.domObserver.start(),Vh(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&mo(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Dl),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Tc(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=vl(this);Ep(d,this.nodeViews)&&(this.nodeViews=d,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&mo(this),this.editable=bl(this),yl(this);let a=Ls(this),l=gl(this),u=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",c=i||!this.docView.matchesNode(e.doc,l,a);(c||!e.selection.eq(r.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&ah(this);if(s){this.domObserver.stop();let d=c&&(Te||Ee)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Cp(r.selection,e.selection);if(c){let h=Ee?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Za(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Fh(this))?Ct(this,d):(gc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&lh(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof F){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ja(this,t.getBoundingClientRect(),e)}else Ja(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(Te){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&uh(this.dom),Ct(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return ph(this,e)}coordsAtPos(e,t=1){return lc(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return vh(this,t||this.state,e)}pasteHTML(e,t){return Rr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Rr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Wh(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ls(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Kh(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return xe&&this.root.nodeType===11&&nh(this.dom.ownerDocument)==this.dom?pp(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function gl(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"&&(e.class+=" "+t[r]),r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),[_e.node(0,n.state.doc.content.size,e)]}function yl(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:_e.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function bl(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Cp(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function vl(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Ep(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Dl(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var qt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kl=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),xp=typeof navigator<"u"&&/Mac/.test(navigator.platform),Sp=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wp=xp||kl&&+kl[1]<57;for(var me=0;me<10;me++)qt[48+me]=qt[96+me]=String(me);for(var me=1;me<=24;me++)qt[me+111]="F"+me;for(var me=65;me<=90;me++)qt[me]=String.fromCharCode(me+32),Mi[me]=String.fromCharCode(me);for(var $s in qt)Mi.hasOwnProperty($s)||(Mi[$s]=qt[$s]);function Ap(n){var e=wp&&(n.ctrlKey||n.altKey||n.metaKey)||Sp&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Mi:qt)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Op=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Tp(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Op?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function Mp(n){let e=Object.create(null);for(let t in n)e[Tp(t)]=n[t];return e}function _s(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Np(n){return new De({props:{handleKeyDown:Ic(n)}})}function Ic(n){let e=Mp(n);return function(t,r){let i=Ap(r),s,o=e[_s(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[_s(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=qt[r.keyCode])&&s!=i){let a=e[_s(s,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const Fp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Bp(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Ip=(n,e,t)=>{let r=Bp(n,t);if(!r)return!1;let i=Rc(r);if(!i){let o=r.blockRange(),a=o&&ir(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&zc(n,i,e))return!0;if(r.parent.content.size==0&&(Xn(s,"end")||F.isSelectable(s))){let o=Ro(n.doc,r.before(),r.after(),O.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Xn(s,"end")?P.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):F.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function Xn(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Rp=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=Rc(r)}let o=s&&s.nodeBefore;return!o||!F.isSelectable(o)?!1:(e&&e(n.tr.setSelection(F.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Rc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Pp(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Lp=(n,e,t)=>{let r=Pp(n,t);if(!r)return!1;let i=Pc(r);if(!i)return!1;let s=i.nodeAfter;if(zc(n,i,e))return!0;if(r.parent.content.size==0&&(Xn(s,"start")||F.isSelectable(s))){let o=Ro(n.doc,r.before(),r.after(),O.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Xn(s,"start")?P.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):F.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},zp=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=Pc(r)}let o=s&&s.nodeAfter;return!o||!F.isSelectable(o)?!1:(e&&e(n.tr.setSelection(F.create(n.doc,s.pos)).scrollIntoView()),!0)};function Pc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const $p=(n,e)=>{let t=n.selection,r=t instanceof F,i;if(r){if(t.node.isTextblock||!Kt(n.doc,t.from))return!1;i=t.from}else if(i=Ju(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(F.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},_p=(n,e)=>{let t=n.selection,r;if(t instanceof F){if(t.node.isTextblock||!Kt(n.doc,t.to))return!1;r=t.to}else if(r=Ju(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},jp=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&ir(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},Hp=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Lc(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Vp=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=Lc(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(P.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Wp=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Qe||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Lc(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(z.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},qp=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Vn(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&ir(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},Kp=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(F.create(n.doc,i))),!0)};function Up(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Kt(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function zc(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Up(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,d=E.empty;for(let m=s.length-1;m>=0;m--)d=E.from(s[m].create(null,d));d=E.from(r.copy(d));let h=n.tr.step(new fe(e.pos-1,f,e.pos,f,new O(d,1,0),s.length,!0)),p=f+2*s.length;Kt(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=P.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&ir(u);if(c!=null&&c>=e.depth)return t&&t(n.tr.lift(u,c).scrollIntoView()),!0;if(a&&Xn(i,"start",!0)&&Xn(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(t){let m=E.empty;for(let b=d.length-1;b>=0;b--)m=E.from(d[b].copy(m));let y=n.tr.step(new fe(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new O(m,d.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function $c(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(z.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const Jp=$c(-1),Gp=$c(1);function Yp(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&Io(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Cl(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let c=t.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Xp(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let c=t.doc.resolve(o.start-2);l=new Ei(c,c,o.depth),o.endIndex<o.parent.childCount&&(o=new Ei(i,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let u=Io(l,n,e,o);return u?(r&&r(Qp(t.tr,o,u,a,n).scrollIntoView()),!0):!1}}function Qp(n,e,t,r,i){let s=E.empty;for(let c=t.length-1;c>=0;c--)s=E.from(t[c].type.create(t[c].attrs,s));n.step(new fe(e.start-(r?2:0),e.end,e.start,e.end,new O(s,0,0),t.length,!0));let o=0;for(let c=0;c<t.length;c++)t[c].type==i&&(o=c+1);let a=t.length-o,l=e.start+t.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Vn(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return n}function Zp(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?em(e,t,n,s):tm(e,t,s):!0:!1}}function em(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fe(s-1,o,s,o,new O(E.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Ei(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=ir(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Kt(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function tm(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?E.empty:E.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return r.step(new fe(f-(a?1:0),d+(l?1:0),f+1,d-1,new O((a?E.empty:E.from(i.copy(E.empty))).append(l?E.empty:E.from(i.copy(E.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function nm(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let u=l.lastChild&&l.lastChild.type==a.type,c=E.from(u?n.create():null),f=new O(E.from(n.create(null,E.from(a.type.create(null,c)))),u?3:1,0),d=s.start,h=s.end;t(e.tr.step(new fe(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function cs(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class fs{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,u=e||s.tr,c=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const y=this.buildProps(u,t),b=h(...m)(y);return a.push(b),f}])),run:c};return f}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i;s.storedMarks&&e.setStoredMarks(s.storedMarks);const a={tr:e,editor:i,view:o,state:cs({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}class rm{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function T(n,e,t){return n.config[e]===void 0&&n.parent?T(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?T(n.parent,e,t):null}):n.config[e]}function ds(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function _c(n){const e=[],{nodeExtensions:t,markExtensions:r}=ds(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=T(o,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=T(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{const d={...s,...f};f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete d.default,e.push({type:o.name,name:c,attribute:d})})}),e}function de(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function he(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}i==="class"?r[i]=[r[i],s].join(" "):i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function go(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>he(t,r),{})}function jc(n){return typeof n=="function"}function R(n,e=void 0,...t){return jc(n)?e?n.bind(e)(...t):n(...t):n}function im(n={}){return Object.keys(n).length===0&&n.constructor===Object}function sm(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function El(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):sm(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function xl(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&im(t)?!1:t!=null))}function om(n){var e;const t=_c(n),{nodeExtensions:r,markExtensions:i}=ds(n),s=(e=r.find(l=>T(l,"topNode")))===null||e===void 0?void 0:e.name,o=Object.fromEntries(r.map(l=>{const u=t.filter(y=>y.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=n.reduce((y,b)=>{const v=T(b,"extendNodeSchema",c);return{...y,...v?v(l):{}}},{}),d=xl({...f,content:R(T(l,"content",c)),marks:R(T(l,"marks",c)),group:R(T(l,"group",c)),inline:R(T(l,"inline",c)),atom:R(T(l,"atom",c)),selectable:R(T(l,"selectable",c)),draggable:R(T(l,"draggable",c)),code:R(T(l,"code",c)),defining:R(T(l,"defining",c)),isolating:R(T(l,"isolating",c)),attrs:Object.fromEntries(u.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),h=R(T(l,"parseHTML",c));h&&(d.parseDOM=h.map(y=>El(y,u)));const p=T(l,"renderHTML",c);p&&(d.toDOM=y=>p({node:y,HTMLAttributes:go(y,u)}));const m=T(l,"renderText",c);return m&&(d.toText=m),[l.name,d]})),a=Object.fromEntries(i.map(l=>{const u=t.filter(m=>m.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=n.reduce((m,y)=>{const b=T(y,"extendMarkSchema",c);return{...m,...b?b(l):{}}},{}),d=xl({...f,inclusive:R(T(l,"inclusive",c)),excludes:R(T(l,"excludes",c)),group:R(T(l,"group",c)),spanning:R(T(l,"spanning",c)),code:R(T(l,"code",c)),attrs:Object.fromEntries(u.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)===null||y===void 0?void 0:y.default}]}))}),h=R(T(l,"parseHTML",c));h&&(d.parseDOM=h.map(m=>El(m,u)));const p=T(l,"renderHTML",c);return p&&(d.toDOM=m=>p({mark:m,HTMLAttributes:go(m,u)})),[l.name,d]}));return new Dd({topNode:s,nodes:o,marks:a})}function js(n,e){return e.nodes[n]||e.marks[n]||null}function Sl(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const am=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";t+=c.slice(0,Math.max(0,r-s))}),t};function Ko(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class hs{constructor(e){this.find=e.find,this.handler=e.handler}}const lm=(n,e)=>{if(Ko(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Hs(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=am(u)+s;return o.forEach(d=>{if(c)return;const h=lm(f,d.find);if(!h)return;const p=l.state.tr,m=cs({state:l.state,transaction:p}),y={from:r-(h[0].length-s.length),to:i},{commands:b,chain:v,can:C}=new fs({editor:t,state:m});d.handler({state:m,range:y,match:h,commands:b,chain:v,can:C})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),c=!0)}),c}function um(n){const{editor:e,rules:t}=n,r=new De({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return Hs({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Hs({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Hs({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function cm(n){return typeof n=="number"}class fm{constructor(e){this.find=e.find,this.handler=e.handler}}const dm=(n,e)=>{if(Ko(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[r.text];return i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function hm(n){const{editor:e,state:t,from:r,to:i,rule:s}=n,{commands:o,chain:a,can:l}=new fs({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,i,(f,d)=>{if(!f.isTextblock||f.type.spec.code)return;const h=Math.max(r,d),p=Math.min(i,d+f.content.size),m=f.textBetween(h-d,p-d,void 0,"￼");dm(m,s.find).forEach(b=>{if(b.index===void 0)return;const v=h+b.index+1,C=v+b[0].length,g={from:t.tr.mapping.map(v),to:t.tr.mapping.map(C)},x=s.handler({state:t,range:g,match:b,commands:o,chain:a,can:l});u.push(x)})}),u.every(f=>f!==null)}function pm(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1;return t.map(a=>new De({view(l){const u=c=>{var f;r=!((f=l.dom.parentElement)===null||f===void 0)&&f.contains(c.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:l=>(s=r===l.dom.parentElement,!1),paste:(l,u)=>{var c;const f=(c=u.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(l,u,c)=>{const f=l[0],d=f.getMeta("uiEvent")==="paste"&&!i,h=f.getMeta("uiEvent")==="drop"&&!s;if(!d&&!h)return;const p=u.doc.content.findDiffStart(c.doc.content),m=u.doc.content.findDiffEnd(c.doc.content);if(!cm(p)||!m||p===m.b)return;const y=c.tr,b=cs({state:c,transaction:y});if(!(!hm({editor:e,state:b,from:Math.max(p-1,0),to:m.b-1,rule:a})||!y.steps.length))return y}}))}function mm(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class Pn{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Pn.resolve(e),this.schema=om(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:js(r.name,this.schema)};r.type==="mark"&&(!((i=R(T(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=T(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=T(r,"onCreate",s);a&&this.editor.on("create",a);const l=T(r,"onUpdate",s);l&&this.editor.on("update",l);const u=T(r,"onSelectionUpdate",s);u&&this.editor.on("selectionUpdate",u);const c=T(r,"onTransaction",s);c&&this.editor.on("transaction",c);const f=T(r,"onFocus",s);f&&this.editor.on("focus",f);const d=T(r,"onBlur",s);d&&this.editor.on("blur",d);const h=T(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const t=Pn.sort(Pn.flatten(e)),r=mm(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=T(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=T(r,"priority")||100,o=T(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:js(t.name,this.schema)},i=T(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Pn.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:js(o.name,this.schema)},l=[],u=T(o,"addKeyboardShortcuts",a);let c={};if(o.type==="mark"&&o.config.exitable&&(c.ArrowRight=()=>dt.handleExit({editor:e,mark:o})),u){const m=Object.fromEntries(Object.entries(u()).map(([y,b])=>[y,()=>b({editor:e})]));c={...c,...m}}const f=Np(c);l.push(f);const d=T(o,"addInputRules",a);Sl(o,e.options.enableInputRules)&&d&&r.push(...d());const h=T(o,"addPasteRules",a);Sl(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=T(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[um({editor:e,rules:r}),...pm({editor:e,rules:i}),...s]}get attributes(){return _c(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ds(this.extensions);return Object.fromEntries(t.filter(r=>!!T(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:de(r.name,this.schema)},o=T(r,"addNodeView",s);if(!o)return[];const a=(l,u,c,f)=>{const d=go(l,i);return o()({editor:e,node:l,getPos:c,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function gm(n){return Object.prototype.toString.call(n).slice(8,-1)}function Vs(n){return gm(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ps(n,e){const t={...n};return Vs(n)&&Vs(e)&&Object.keys(e).forEach(r=>{Vs(e[r])?r in n?t[r]=ps(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class Ae{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(T(this,"addOptions",{name:this.name}))),this.storage=R(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ae(e)}configure(e={}){const t=this.extend();return t.options=ps(this.options,e),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ae(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=R(T(t,"addOptions",{name:t.name})),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}}function Hc(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(u,c,f,d)=>{var h;const p=o==null?void 0:o[u.type.name];p?(u.isBlock&&!l&&(a+=s,l=!0),f&&(a+=p({node:u,pos:c,parent:f,index:d,range:e}))):u.isText?(a+=(h=u==null?void 0:u.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c),l=!1):u.isBlock&&!l&&(a+=s,l=!0)}),a}function Vc(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const ym=Ae.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new De({key:new We("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=Vc(t);return Hc(r,{from:o,to:a},{textSerializers:l})}}})]}}),bm=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),vm=(n=!1)=>({commands:e})=>e.setContent("",n),Dm=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=ir(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},km=n=>e=>n(e),Cm=()=>({state:n,dispatch:e})=>Wp(n,e),Em=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},xm=n=>({tr:e,state:t,dispatch:r})=>{const i=de(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Sm=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},wm=()=>({state:n,dispatch:e})=>Fp(n,e),Am=()=>({commands:n})=>n.keyboardShortcut("Enter"),Om=()=>({state:n,dispatch:e})=>Vp(n,e);function Ni(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Ko(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function yo(n,e,t={}){return n.find(r=>r.type===e&&Ni(r.attrs,t))}function Tm(n,e,t={}){return!!yo(n,e,t)}function Uo(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=yo([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(yo([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Tm([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Jt(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Mm=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Jt(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:u,to:c}=a;if(i){const f=Uo(l,s,e);if(f&&f.from<=u&&f.to>=c){const d=z.create(o,f.from,f.to);t.setSelection(d)}}return!0},Nm=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Jo(n){return n instanceof z}function kt(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Wc(n,e=null){if(!e)return null;const t=P.atStart(n),r=P.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?z.create(n,kt(0,i,s),kt(n.content.size,i,s)):z.create(n,kt(e,i,s),kt(e,i,s))}function Go(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Fm=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Go()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Jo(t.state.selection))return o(),!0;const a=Wc(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Bm=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Im=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function wl(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Fi(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)?E.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Fi("",e,t)}if(typeof n=="string"){const r=Kn.fromSchema(e);return t.slice?r.parseSlice(wl(n),t.parseOptions).content:r.parse(wl(n),t.parseOptions)}return Fi("",e,t)}function Rm(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof ve||i instanceof fe))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,u,c)=>{o===0&&(o=c)}),n.setSelection(P.near(n.doc.resolve(o),t))}const Pm=n=>n.toString().startsWith("<"),Lm=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=Fi(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:n,u=!0,c=!0;if((Pm(o)?o:[o]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,c=c?d.isBlock:!1}),a===l&&c){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}u?r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Rm(r,r.steps.length-1,-1)}return!0},zm=()=>({state:n,dispatch:e})=>$p(n,e),$m=()=>({state:n,dispatch:e})=>_p(n,e),_m=()=>({state:n,dispatch:e})=>Ip(n,e),jm=()=>({state:n,dispatch:e})=>Lp(n,e);function qc(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Hm(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Go()||qc()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Vm=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Hm(n).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Lr(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?de(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,u=a.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Ni(f.node.attrs,t,{strict:!1}));return s?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const Wm=(n,e={})=>({state:t,dispatch:r})=>{const i=de(n,t.schema);return Lr(t,i,e)?jp(t,r):!1},qm=()=>({state:n,dispatch:e})=>qp(n,e),Km=n=>({state:e,dispatch:t})=>{const r=de(n,e.schema);return Zp(r)(e,t)},Um=()=>({state:n,dispatch:e})=>Hp(n,e);function ms(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Al(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Jm=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ms(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=de(n,r.schema)),a==="mark"&&(o=Jt(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{s&&s===u.type&&t.setNodeMarkup(c,void 0,Al(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&t.addMark(c,c+u.nodeSize,o.create(Al(f.attrs,e)))})})}),!0):!1},Gm=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Ym=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Xm=()=>({state:n,dispatch:e})=>Rp(n,e),Qm=()=>({state:n,dispatch:e})=>zp(n,e),Zm=()=>({state:n,dispatch:e})=>Kp(n,e),eg=()=>({state:n,dispatch:e})=>Gp(n,e),tg=()=>({state:n,dispatch:e})=>Jp(n,e);function Kc(n,e,t={}){return Fi(n,e,{slice:!1,parseOptions:t})}const ng=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Kc(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function rg(n,e){const t=new ec(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function ig(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function sg(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function og(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Yo(n){return e=>og(e.$from,n)}function ag(n,e){const t=lt.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function lg(n,e){const t={from:0,to:n.content.size};return Hc(n,t,e)}function Xo(n,e){const t=Jt(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function ug(n,e){const t=de(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Uc(n,e){const t=ms(typeof e=="string"?e:e.name,n.schema);return t==="node"?ug(n,e):t==="mark"?Xo(n,e):{}}function cg(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function fg(n){const e=cg(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function dg(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(s).map(a,-1),c=e.slice(s).map(l),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),fg(r)}function Bi(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=Uo(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function bo(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Jt(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Ni(f.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;n.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const b=Math.max(h,y),v=Math.min(p,y+m.nodeSize),C=v-b;o+=C,a.push(...m.marks.map(g=>({mark:g,from:b,to:v})))})}),o===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Ni(f.mark.attrs,t,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=o}function hg(n,e,t={}){if(!e)return Lr(n,null,t)||bo(n,null,t);const r=ms(e,n.schema);return r==="node"?Lr(n,e,t):r==="mark"?bo(n,e,t):!1}function Ol(n,e){const{nodeExtensions:t}=ds(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=R(T(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function pg(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function mg(n){return n instanceof F}function gg(n,e,t){const i=n.state.doc.content.size,s=kt(e,0,i),o=kt(t,0,i),a=n.coordsAtPos(s),l=n.coordsAtPos(o,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),d=Math.max(a.right,l.right),h=d-f,p=c-u,b={top:u,bottom:c,left:f,right:d,width:h,height:p,x:f,y:u};return{...b,toJSON:()=>b}}function yg(n,e,t){var r;const{selection:i}=e;let s=null;if(Jo(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(t),p=!!t.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(t));u=h&&p}return!u}),u})}const bg=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Jt(n,r.schema);if(i)if(o){const u=Xo(r,l);t.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const p=Math.max(h,c),m=Math.min(h+d.nodeSize,f);d.marks.find(b=>b.type===l)?d.marks.forEach(b=>{l===b.type&&t.addMark(p,m,l.create({...b.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return yg(r,t,l)},vg=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Dg=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=de(n,t.schema);return s.isTextblock?i().command(({commands:o})=>Cl(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>Cl(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},kg=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=kt(n,0,r.content.size),s=F.create(r,i);e.setSelection(s)}return!0},Cg=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=z.atStart(r).from,a=z.atEnd(r).to,l=kt(i,o,a),u=kt(s,o,a),c=z.create(r,l,u);e.setSelection(c)}return!0},Eg=n=>({state:e,dispatch:t})=>{const r=de(n,e.schema);return nm(r)(e,t)};function di(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Tl(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const xg=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,c=di(u,a.node().type.name,a.node().attrs);if(s instanceof F&&s.node.isBlock)return!a.parentOffset||!Vn(o,a.pos)?!1:(r&&(n&&Tl(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;s instanceof z&&e.deleteSelection();const d=a.depth===0?void 0:ig(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,p=Vn(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Vn(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:c}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}n&&Tl(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Sg=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=de(n,t.schema),{$from:a,$to:l}=t.selection,u=t.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==o)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let y=E.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let A=a.depth-b;A>=a.depth-3;A-=1)y=E.from(a.node(A).copy(y));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,C=di(f,a.node().type.name,a.node().attrs),g=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(C))||void 0;y=y.append(E.from(o.createAndFill(null,g)||void 0));const x=a.before(a.depth-(b-1));e.replace(x,a.after(-v),new O(y,4-b,0));let D=-1;e.doc.nodesBetween(x,e.doc.content.size,(A,S)=>{if(D>-1)return!1;A.isTextblock&&A.content.size===0&&(D=S+1)}),D>-1&&e.setSelection(z.near(e.doc.resolve(D))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=di(f,c.type.name,c.attrs),p=di(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:h},{type:d,attrs:p}]:[{type:o,attrs:h}];return Vn(e.doc,a.pos,2)?(r&&e.split(a.pos,2,m).scrollIntoView(),!0):!1},Ml=(n,e)=>{const t=Yo(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Kt(n.doc,t.pos)&&n.join(t.pos),!0},Nl=(n,e)=>{const t=Yo(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Kt(n.doc,r)&&n.join(r),!0},wg=(n,e)=>({editor:t,tr:r,state:i,dispatch:s,chain:o,commands:a,can:l})=>{const{extensions:u}=t.extensionManager,c=de(n,i.schema),f=de(e,i.schema),{selection:d}=i,{$from:h,$to:p}=d,m=h.blockRange(p);if(!m)return!1;const y=Yo(b=>Ol(b.type.name,u))(d);if(m.depth>=1&&y&&m.depth-y.depth<=1){if(y.node.type===c)return a.liftListItem(f);if(Ol(y.node.type.name,u)&&c.validContent(y.node.content)&&s)return o().command(()=>(r.setNodeMarkup(y.pos,c),!0)).command(()=>Ml(r,c)).command(()=>Nl(r,c)).run()}return o().command(()=>l().wrapInList(c)?!0:a.clearNodes()).wrapInList(c).command(()=>Ml(r,c)).command(()=>Nl(r,c)).run()},Ag=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Jt(n,r.schema);return bo(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Og=(n,e,t={})=>({state:r,commands:i})=>{const s=de(n,r.schema),o=de(e,r.schema);return Lr(r,s,t)?i.setNode(o):i.setNode(s,t)},Tg=(n,e={})=>({state:t,commands:r})=>{const i=de(n,t.schema);return Lr(t,i,e)?r.lift(i):r.wrapIn(i,e)},Mg=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Ng=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Fg=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Jt(n,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&o){let{from:d,to:h}=a;const p=(s=u.marks().find(y=>y.type===l))===null||s===void 0?void 0:s.attrs,m=Uo(u,l,p);m&&(d=m.from,h=m.to),t.removeMark(d,h,l)}else f.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},Bg=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ms(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=de(n,r.schema)),a==="mark"&&(o=Jt(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{s&&s===f.type&&t.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(h=>{if(o===h.type){const p=Math.max(d,u),m=Math.min(d+f.nodeSize,c);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Ig=(n,e={})=>({state:t,dispatch:r})=>{const i=de(n,t.schema);return Yp(i,e)(t,r)},Rg=(n,e={})=>({state:t,dispatch:r})=>{const i=de(n,t.schema);return Xp(i,e)(t,r)};var Pg=Object.freeze({__proto__:null,blur:bm,clearContent:vm,clearNodes:Dm,command:km,createParagraphNear:Cm,deleteCurrentNode:Em,deleteNode:xm,deleteRange:Sm,deleteSelection:wm,enter:Am,exitCode:Om,extendMarkRange:Mm,first:Nm,focus:Fm,forEach:Bm,insertContent:Im,insertContentAt:Lm,joinUp:zm,joinDown:$m,joinBackward:_m,joinForward:jm,keyboardShortcut:Vm,lift:Wm,liftEmptyBlock:qm,liftListItem:Km,newlineInCode:Um,resetAttributes:Jm,scrollIntoView:Gm,selectAll:Ym,selectNodeBackward:Xm,selectNodeForward:Qm,selectParentNode:Zm,selectTextblockEnd:eg,selectTextblockStart:tg,setContent:ng,setMark:bg,setMeta:vg,setNode:Dg,setNodeSelection:kg,setTextSelection:Cg,sinkListItem:Eg,splitBlock:xg,splitListItem:Sg,toggleList:wg,toggleMark:Ag,toggleNode:Og,toggleWrap:Tg,undoInputRule:Mg,unsetAllMarks:Ng,unsetMark:Fg,updateAttributes:Bg,wrapIn:Ig,wrapInList:Rg});const Lg=Ae.create({name:"commands",addCommands(){return{...Pg}}}),zg=Ae.create({name:"editable",addProseMirrorPlugins(){return[new De({key:new We("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$g=Ae.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new De({key:new We("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),_g=Ae.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,p=P.atStart(u).from===d;return!c||!p||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Go()||qc()?s:i},addProseMirrorPlugins(){return[new De({key:new We("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=P.atStart(e.doc).from,l=P.atEnd(e.doc).to,u=s===a&&o===l,c=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!u||!c)return;const f=t.tr,d=cs({state:t,transaction:f}),{commands:h}=new fs({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),jg=Ae.create({name:"tabindex",addProseMirrorPlugins(){return[new De({key:new We("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Hg=Object.freeze({__proto__:null,ClipboardTextSerializer:ym,Commands:Lg,Editable:zg,FocusEvents:$g,Keymap:_g,Tabindex:jg});const Vg=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Wg(n,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class qg extends rm{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Wg(Vg,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=jc(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(Hg):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Pn(t,this)}createCommandManager(){this.commandManager=new fs({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Kc(this.options.content,this.schema,this.options.parseOptions),t=Wc(e,this.options.autofocus);this.view=new kp(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:In.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Uc(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return hg(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ag(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return lg(this.state.doc,{blockSeparator:t,textSerializers:{...r,...Vc(this.schema)}})}get isEmpty(){return pg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function Qn(n){return new hs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=R(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];let l=t.to;if(o){const u=a.search(/\S/),c=t.from+a.indexOf(o),f=c+o.length;if(Bi(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;f<t.to&&s.delete(f,t.to),c>t.from&&s.delete(t.from+u,c),l=t.from+u+o.length,s.addMark(t.from+u,l,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function Jc(n){return new hs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=R(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let a=t.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let u=o+l;u>a?u=a:a=u+r[1].length;const c=r[0][r[0].length-1];s.insertText(c,o+r[0].length-1),s.replaceWith(u,a,n.type.create(i))}else r[0]&&s.replaceWith(o,a,n.type.create(i))}})}function vo(n){return new hs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=R(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function Qo(n){return new hs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=R(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),a=s.doc.resolve(t.from).blockRange(),l=a&&Io(a,n.type,i);if(!l)return null;s.wrap(a,l);const u=s.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Kt(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&s.join(t.from-1)}})}class dt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(T(this,"addOptions",{name:this.name}))),this.storage=R(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new dt(e)}configure(e={}){const t=this.extend();return t.options=ps(this.options,e),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new dt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=R(T(t,"addOptions",{name:t.name})),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class Oe{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(T(this,"addOptions",{name:this.name}))),this.storage=R(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oe(e)}configure(e={}){const t=this.extend();return t.options=ps(this.options,e),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Oe(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=R(T(t,"addOptions",{name:t.name})),t.storage=R(T(t,"addStorage",{name:t.name,options:t.options})),t}}function yn(n){return new fm({find:n.find,handler:({state:e,range:t,match:r})=>{const i=R(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];let l=t.to;if(o){const u=a.search(/\S/),c=t.from+a.indexOf(o),f=c+o.length;if(Bi(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;f<t.to&&s.delete(f,t.to),c>t.from&&s.delete(t.from+u,c),l=t.from+u+o.length,s.addMark(t.from+u,l,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}const Kg=/^\s*>\s$/,Ug=Oe.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Qo({find:Kg,type:this.type})]}}),Jg=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Gg=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Yg=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Xg=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Qg=dt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Qn({find:Jg,type:this.type}),Qn({find:Yg,type:this.type})]},addPasteRules(){return[yn({find:Gg,type:this.type}),yn({find:Xg,type:this.type})]}}),Zg=/^\s*([-+*])\s$/,e0=Oe.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",he(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Qo({find:Zg,type:this.type})]}}),t0=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,n0=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,r0=dt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Qn({find:t0,type:this.type})]},addPasteRules(){return[yn({find:n0,type:this.type})]}}),i0=/^```([a-z]+)?[\s\n]$/,s0=/^~~~([a-z]+)?[\s\n]$/,o0=Oe.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",he(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[vo({find:i0,type:this.type,getAttributes:n=>({language:n[1]})}),vo({find:s0,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new De({key:new We("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(z.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),a0=Oe.create({name:"doc",topNode:!0,content:"block+"});function l0(n={}){return new De({view(e){return new u0(e,n)}})}class u0{constructor(e,t){this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=s=>{this[r](s)};return e.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let u=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(u){let c=u.getBoundingClientRect(),f=a?c.bottom:c.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(o=Gu(this.editorView.state.doc,o,this.editorView.dragging.slice),o==null))return this.setCursor(null);this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const c0=Ae.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[l0(this.options)]}});class ee extends P{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return ee.valid(r)?new ee(r):P.near(r)}content(){return O.empty}eq(e){return e instanceof ee&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ee(e.resolve(t.pos))}getBookmark(){return new Zo(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!f0(e)||!d0(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&ee.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(ee.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!F.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(ee.valid(a))return a}return null}}}ee.prototype.visible=!1;ee.findFrom=ee.findGapCursorFrom;P.jsonID("gapcursor",ee);class Zo{constructor(e){this.pos=e}map(e){return new Zo(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ee.valid(t)?new ee(t):P.near(t)}}function f0(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function d0(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function h0(){return new De({props:{decorations:y0,createSelectionBetween(n,e,t){return e.pos==t.pos&&ee.valid(t)?new ee(t):null},handleClick:m0,handleKeyDown:p0,handleDOMEvents:{beforeinput:g0}}})}const p0=Ic({ArrowLeft:oi("horiz",-1),ArrowRight:oi("horiz",1),ArrowUp:oi("vert",-1),ArrowDown:oi("vert",1)});function oi(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof z){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=ee.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new ee(u))),!0):!1}}function m0(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ee.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&F.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ee(r))),!0)}function g0(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ee))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=E.empty;for(let o=r.length-1;o>=0;o--)i=E.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new O(i,0,0));return s.setSelection(z.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function y0(n){if(!(n.selection instanceof ee))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",oe.create(n.doc,[_e.widget(n.selection.head,e,{key:"gapcursor"})])}const b0=Ae.create({name:"gapCursor",addProseMirrorPlugins(){return[h0()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=R(T(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),v0=Oe.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",he(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),D0=Oe.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,he(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>vo({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ii=200,ge=function(){};ge.prototype.append=function(e){return e.length?(e=ge.from(e),!this.length&&e||e.length<Ii&&this.leafAppend(e)||this.length<Ii&&e.leafPrepend(this)||this.appendInner(e)):this};ge.prototype.prepend=function(e){return e.length?ge.from(e).append(this):this};ge.prototype.appendInner=function(e){return new k0(this,e)};ge.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ge.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ge.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ge.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ge.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};ge.from=function(e){return e instanceof ge?e:e&&e.length?new Gc(e):ge.empty};var Gc=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ii)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ii)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ge);ge.empty=new Gc([]);var k0=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ge),Yc=ge;const C0=500;class Ge{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,c.push(f);return}if(i){c.push(new nt(f.map));let h=f.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new nt(p,void 0,void 0,u.length+c.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(s)):f.selection,l=new Ge(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new nt(e.mapping.maps[c],f,t),h;(h=l&&l.merge(d))&&(d=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(d),t&&(o++,t=void 0),i||(l=d)}let u=o-r.depth;return u>x0&&(a=E0(a,u),o-=u),new Ge(a.append(s),o)}remapping(e,t){let r=new Hn;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new Ge(this.items.append(e.map(t=>new nt(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=t;this.items.forEach(d=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),y=d.selection&&d.selection.map(s.slice(l+1,h));y&&a++,r.push(new nt(p,m,y))}else r.push(new nt(p))},i);let u=[];for(let d=t;d<o;d++)u.push(new nt(s.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new Ge(c,a);return f.emptyItemCount()>C0&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),u=l&&l.getMap();if(r--,u&&t.appendMap(u,r),l){let c=o.selection&&o.selection.map(t.slice(r));c&&s++;let f=new nt(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&r--},this.items.length,0),new Ge(Yc.from(i.reverse()),s)}}Ge.empty=new Ge(Yc.empty,0);function E0(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class nt{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new nt(t.getMap().invert(),t,this.selection)}}}class Tt{constructor(e,t,r,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i}}const x0=20;function S0(n,e,t,r){let i=t.getMeta(Vt),s;if(i)return i.historyState;t.getMeta(A0)&&(n=new Tt(n.done,n.undone,null,0));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Vt))return o.getMeta(Vt).redo?new Tt(n.done.addTransform(t,void 0,r,hi(e)),n.undone,Fl(t.mapping.maps[t.steps.length-1]),n.prevTime):new Tt(n.done,n.undone.addTransform(t,void 0,r,hi(e)),null,n.prevTime);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.prevTime==0||!o&&(n.prevTime<(t.time||0)-r.newGroupDelay||!w0(t,n.prevRanges)),l=o?Ws(n.prevRanges,t.mapping):Fl(t.mapping.maps[t.steps.length-1]);return new Tt(n.done.addTransform(t,a?e.selection.getBookmark():void 0,r,hi(e)),Ge.empty,l,t.time)}else return(s=t.getMeta("rebased"))?new Tt(n.done.rebased(t,s),n.undone.rebased(t,s),Ws(n.prevRanges,t.mapping),n.prevTime):new Tt(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ws(n.prevRanges,t.mapping),n.prevTime)}function w0(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function Fl(n){let e=[];return n.forEach((t,r,i,s)=>e.push(i,s)),e}function Ws(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function Xc(n,e,t,r){let i=hi(e),s=Vt.get(e).spec.config,o=(r?n.undone:n.done).popEvent(e,i);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(r?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),u=new Tt(r?l:o.remaining,r?o.remaining:l,null,0);t(o.transform.setSelection(a).setMeta(Vt,{redo:r,historyState:u}).scrollIntoView())}let qs=!1,Bl=null;function hi(n){let e=n.plugins;if(Bl!=e){qs=!1,Bl=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){qs=!0;break}}return qs}const Vt=new We("history"),A0=new We("closeHistory");function O0(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new De({key:Vt,state:{init(){return new Tt(Ge.empty,Ge.empty,null,0)},apply(e,t,r){return S0(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Qc:r=="historyRedo"?Zc:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const Qc=(n,e)=>{let t=Vt.getState(n);return!t||t.done.eventCount==0?!1:(e&&Xc(t,n,e,!1),!0)},Zc=(n,e)=>{let t=Vt.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Xc(t,n,e,!0),!0)},T0=Ae.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Qc(n,e),redo:()=>({state:n,dispatch:e})=>Zc(n,e)}},addProseMirrorPlugins(){return[O0(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),M0=Oe.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",he(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n})=>n().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{var r;if(t){const{$to:i}=e.selection,s=i.end();if(i.nodeAfter)e.setSelection(z.create(e.doc,i.pos));else{const o=(r=i.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();o&&(e.insert(s,o),e.setSelection(z.create(e.doc,s)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[Jc({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),N0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,F0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,B0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,I0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,R0=dt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Qn({find:N0,type:this.type}),Qn({find:B0,type:this.type})]},addPasteRules(){return[yn({find:F0,type:this.type}),yn({find:I0,type:this.type})]}}),P0=Oe.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",he(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),L0=/^(\d+)\.\s$/,z0=Oe.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",he(this.options.HTMLAttributes,t),0]:["ol",he(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Qo({find:L0,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,e)=>e.childCount+e.attrs.start===+n[1]})]}}),$0=Oe.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,j0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,H0=dt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Qn({find:_0,type:this.type})]},addPasteRules(){return[yn({find:j0,type:this.type})]}}),V0=Oe.create({name:"text",group:"inline"}),W0=Ae.create({name:"starterKit",addExtensions(){var n,e,t,r,i,s,o,a,l,u,c,f,d,h,p,m,y,b;const v=[];return this.options.blockquote!==!1&&v.push(Ug.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&v.push(Qg.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&v.push(e0.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&v.push(r0.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(o0.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&v.push(a0.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&v.push(c0.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&v.push(b0.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(v0.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(D0.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&v.push(T0.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&v.push(M0.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&v.push(R0.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&v.push(P0.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&v.push(z0.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&v.push($0.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&v.push(H0.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&v.push(V0.configure((b=this.options)===null||b===void 0?void 0:b.text)),v}});var Me="top",He="bottom",Ve="right",Ne="left",ea="auto",Vr=[Me,He,Ve,Ne],Zn="start",zr="end",q0="clippingParents",ef="viewport",fr="popper",K0="reference",Il=Vr.reduce(function(n,e){return n.concat([e+"-"+Zn,e+"-"+zr])},[]),tf=[].concat(Vr,[ea]).reduce(function(n,e){return n.concat([e,e+"-"+Zn,e+"-"+zr])},[]),U0="beforeRead",J0="read",G0="afterRead",Y0="beforeMain",X0="main",Q0="afterMain",Z0="beforeWrite",ey="write",ty="afterWrite",ny=[U0,J0,G0,Y0,X0,Q0,Z0,ey,ty];function ht(n){return n?(n.nodeName||"").toLowerCase():null}function qe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function bn(n){var e=qe(n).Element;return n instanceof e||n instanceof Element}function je(n){var e=qe(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function ta(n){if(typeof ShadowRoot>"u")return!1;var e=qe(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function ry(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!je(s)||!ht(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function iy(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!je(i)||!ht(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const nf={name:"applyStyles",enabled:!0,phase:"write",fn:ry,effect:iy,requires:["computeStyles"]};function ct(n){return n.split("-")[0]}var fn=Math.max,Ri=Math.min,er=Math.round;function Do(){var n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function rf(){return!/^((?!chrome|android).)*safari/i.test(Do())}function tr(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,s=1;e&&je(n)&&(i=n.offsetWidth>0&&er(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&er(r.height)/n.offsetHeight||1);var o=bn(n)?qe(n):window,a=o.visualViewport,l=!rf()&&t,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,d=r.height/s;return{width:f,height:d,top:c,right:u+f,bottom:c+d,left:u,x:u,y:c}}function na(n){var e=tr(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function sf(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&ta(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Et(n){return qe(n).getComputedStyle(n)}function sy(n){return["table","td","th"].indexOf(ht(n))>=0}function Gt(n){return((bn(n)?n.ownerDocument:n.document)||window.document).documentElement}function gs(n){return ht(n)==="html"?n:n.assignedSlot||n.parentNode||(ta(n)?n.host:null)||Gt(n)}function Rl(n){return!je(n)||Et(n).position==="fixed"?null:n.offsetParent}function oy(n){var e=/firefox/i.test(Do()),t=/Trident/i.test(Do());if(t&&je(n)){var r=Et(n);if(r.position==="fixed")return null}var i=gs(n);for(ta(i)&&(i=i.host);je(i)&&["html","body"].indexOf(ht(i))<0;){var s=Et(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Wr(n){for(var e=qe(n),t=Rl(n);t&&sy(t)&&Et(t).position==="static";)t=Rl(t);return t&&(ht(t)==="html"||ht(t)==="body"&&Et(t).position==="static")?e:t||oy(n)||e}function ra(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Sr(n,e,t){return fn(n,Ri(e,t))}function ay(n,e,t){var r=Sr(n,e,t);return r>t?t:r}function of(){return{top:0,right:0,bottom:0,left:0}}function af(n){return Object.assign({},of(),n)}function lf(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var ly=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,af(typeof e!="number"?e:lf(e,Vr))};function uy(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=ct(t.placement),l=ra(a),u=[Ne,Ve].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var f=ly(i.padding,t),d=na(s),h=l==="y"?Me:Ne,p=l==="y"?He:Ve,m=t.rects.reference[c]+t.rects.reference[l]-o[l]-t.rects.popper[c],y=o[l]-t.rects.reference[l],b=Wr(s),v=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,C=m/2-y/2,g=f[h],x=v-d[c]-f[p],D=v/2-d[c]/2+C,A=Sr(g,D,x),S=l;t.modifiersData[r]=(e={},e[S]=A,e.centerOffset=A-D,e)}}function cy(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||sf(e.elements.popper,i)&&(e.elements.arrow=i))}const fy={name:"arrow",enabled:!0,phase:"main",fn:uy,effect:cy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nr(n){return n.split("-")[1]}var dy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hy(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:er(e*i)/i||0,y:er(t*i)/i||0}}function Pl(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,f=n.isFixed,d=o.x,h=d===void 0?0:d,p=o.y,m=p===void 0?0:p,y=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=y.x,m=y.y;var b=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),C=Ne,g=Me,x=window;if(u){var D=Wr(t),A="clientHeight",S="clientWidth";if(D===qe(t)&&(D=Gt(t),Et(D).position!=="static"&&a==="absolute"&&(A="scrollHeight",S="scrollWidth")),D=D,i===Me||(i===Ne||i===Ve)&&s===zr){g=He;var I=f&&D===x&&x.visualViewport?x.visualViewport.height:D[A];m-=I-r.height,m*=l?1:-1}if(i===Ne||(i===Me||i===He)&&s===zr){C=Ve;var L=f&&D===x&&x.visualViewport?x.visualViewport.width:D[S];h-=L-r.width,h*=l?1:-1}}var G=Object.assign({position:a},u&&dy),Y=c===!0?hy({x:h,y:m}):{x:h,y:m};if(h=Y.x,m=Y.y,l){var H;return Object.assign({},G,(H={},H[g]=v?"0":"",H[C]=b?"0":"",H.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",H))}return Object.assign({},G,(e={},e[g]=v?m+"px":"",e[C]=b?h+"px":"",e.transform="",e))}function py(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,u={placement:ct(e.placement),variation:nr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Pl(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Pl(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const my={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:py,data:{}};var ai={passive:!0};function gy(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=qe(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",t.update,ai)}),a&&l.addEventListener("resize",t.update,ai),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",t.update,ai)}),a&&l.removeEventListener("resize",t.update,ai)}}const yy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gy,data:{}};var by={left:"right",right:"left",bottom:"top",top:"bottom"};function pi(n){return n.replace(/left|right|bottom|top/g,function(e){return by[e]})}var vy={start:"end",end:"start"};function Ll(n){return n.replace(/start|end/g,function(e){return vy[e]})}function ia(n){var e=qe(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function sa(n){return tr(Gt(n)).left+ia(n).scrollLeft}function Dy(n,e){var t=qe(n),r=Gt(n),i=t.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=rf();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+sa(n),y:l}}function ky(n){var e,t=Gt(n),r=ia(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=fn(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=fn(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+sa(n),l=-r.scrollTop;return Et(i||t).direction==="rtl"&&(a+=fn(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function oa(n){var e=Et(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function uf(n){return["html","body","#document"].indexOf(ht(n))>=0?n.ownerDocument.body:je(n)&&oa(n)?n:uf(gs(n))}function wr(n,e){var t;e===void 0&&(e=[]);var r=uf(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=qe(r),o=i?[s].concat(s.visualViewport||[],oa(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(wr(gs(o)))}function ko(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Cy(n,e){var t=tr(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function zl(n,e,t){return e===ef?ko(Dy(n,t)):bn(e)?Cy(e,t):ko(ky(Gt(n)))}function Ey(n){var e=wr(gs(n)),t=["absolute","fixed"].indexOf(Et(n).position)>=0,r=t&&je(n)?Wr(n):n;return bn(r)?e.filter(function(i){return bn(i)&&sf(i,r)&&ht(i)!=="body"}):[]}function xy(n,e,t,r){var i=e==="clippingParents"?Ey(n):[].concat(e),s=[].concat(i,[t]),o=s[0],a=s.reduce(function(l,u){var c=zl(n,u,r);return l.top=fn(c.top,l.top),l.right=Ri(c.right,l.right),l.bottom=Ri(c.bottom,l.bottom),l.left=fn(c.left,l.left),l},zl(n,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function cf(n){var e=n.reference,t=n.element,r=n.placement,i=r?ct(r):null,s=r?nr(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case Me:l={x:o,y:e.y-t.height};break;case He:l={x:o,y:e.y+e.height};break;case Ve:l={x:e.x+e.width,y:a};break;case Ne:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?ra(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Zn:l[u]=l[u]-(e[c]/2-t[c]/2);break;case zr:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function $r(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.strategy,o=s===void 0?n.strategy:s,a=t.boundary,l=a===void 0?q0:a,u=t.rootBoundary,c=u===void 0?ef:u,f=t.elementContext,d=f===void 0?fr:f,h=t.altBoundary,p=h===void 0?!1:h,m=t.padding,y=m===void 0?0:m,b=af(typeof y!="number"?y:lf(y,Vr)),v=d===fr?K0:fr,C=n.rects.popper,g=n.elements[p?v:d],x=xy(bn(g)?g:g.contextElement||Gt(n.elements.popper),l,c,o),D=tr(n.elements.reference),A=cf({reference:D,element:C,strategy:"absolute",placement:i}),S=ko(Object.assign({},C,A)),I=d===fr?S:D,L={top:x.top-I.top+b.top,bottom:I.bottom-x.bottom+b.bottom,left:x.left-I.left+b.left,right:I.right-x.right+b.right},G=n.modifiersData.offset;if(d===fr&&G){var Y=G[i];Object.keys(L).forEach(function(H){var le=[Ve,He].indexOf(H)>=0?1:-1,Q=[Me,He].indexOf(H)>=0?"y":"x";L[H]+=Y[Q]*le})}return L}function Sy(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?tf:l,c=nr(r),f=c?a?Il:Il.filter(function(p){return nr(p)===c}):Vr,d=f.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,m){return p[m]=$r(n,{placement:m,boundary:i,rootBoundary:s,padding:o})[ct(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function wy(n){if(ct(n)===ea)return[];var e=pi(n);return[Ll(n),e,Ll(e)]}function Ay(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,c=t.boundary,f=t.rootBoundary,d=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,y=e.options.placement,b=ct(y),v=b===y,C=l||(v||!p?[pi(y)]:wy(y)),g=[y].concat(C).reduce(function(pt,Ke){return pt.concat(ct(Ke)===ea?Sy(e,{placement:Ke,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:m}):Ke)},[]),x=e.rects.reference,D=e.rects.popper,A=new Map,S=!0,I=g[0],L=0;L<g.length;L++){var G=g[L],Y=ct(G),H=nr(G)===Zn,le=[Me,He].indexOf(Y)>=0,Q=le?"width":"height",X=$r(e,{placement:G,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),ie=le?H?Ve:Ne:H?He:Me;x[Q]>D[Q]&&(ie=pi(ie));var se=pi(ie),K=[];if(s&&K.push(X[Y]<=0),a&&K.push(X[ie]<=0,X[se]<=0),K.every(function(pt){return pt})){I=G,S=!1;break}A.set(G,K)}if(S)for(var U=p?3:1,Be=function(Ke){var mt=g.find(function(xn){var gt=A.get(xn);if(gt)return gt.slice(0,Ke).every(function(Sn){return Sn})});if(mt)return I=mt,"break"},tt=U;tt>0;tt--){var Yt=Be(tt);if(Yt==="break")break}e.placement!==I&&(e.modifiersData[r]._skip=!0,e.placement=I,e.reset=!0)}}const Oy={name:"flip",enabled:!0,phase:"main",fn:Ay,requiresIfExists:["offset"],data:{_skip:!1}};function $l(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function _l(n){return[Me,Ve,He,Ne].some(function(e){return n[e]>=0})}function Ty(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=$r(e,{elementContext:"reference"}),a=$r(e,{altBoundary:!0}),l=$l(o,r),u=$l(a,i,s),c=_l(l),f=_l(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const My={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ty};function Ny(n,e,t){var r=ct(n),i=[Ne,Me].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ne,Ve].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Fy(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=tf.reduce(function(c,f){return c[f]=Ny(f,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const By={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Fy};function Iy(n){var e=n.state,t=n.name;e.modifiersData[t]=cf({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ry={name:"popperOffsets",enabled:!0,phase:"read",fn:Iy,data:{}};function Py(n){return n==="x"?"y":"x"}function Ly(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,f=t.padding,d=t.tether,h=d===void 0?!0:d,p=t.tetherOffset,m=p===void 0?0:p,y=$r(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),b=ct(e.placement),v=nr(e.placement),C=!v,g=ra(b),x=Py(g),D=e.modifiersData.popperOffsets,A=e.rects.reference,S=e.rects.popper,I=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,L=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),G=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Y={x:0,y:0};if(D){if(s){var H,le=g==="y"?Me:Ne,Q=g==="y"?He:Ve,X=g==="y"?"height":"width",ie=D[g],se=ie+y[le],K=ie-y[Q],U=h?-S[X]/2:0,Be=v===Zn?A[X]:S[X],tt=v===Zn?-S[X]:-A[X],Yt=e.elements.arrow,pt=h&&Yt?na(Yt):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:of(),mt=Ke[le],xn=Ke[Q],gt=Sr(0,A[X],pt[X]),Sn=C?A[X]/2-U-gt-mt-L.mainAxis:Be-gt-mt-L.mainAxis,xt=C?-A[X]/2+U+gt+xn+L.mainAxis:tt+gt+xn+L.mainAxis,wn=e.elements.arrow&&Wr(e.elements.arrow),Kr=wn?g==="y"?wn.clientTop||0:wn.clientLeft||0:0,sr=(H=G==null?void 0:G[g])!=null?H:0,Ur=ie+Sn-sr-Kr,Jr=ie+xt-sr,or=Sr(h?Ri(se,Ur):se,ie,h?fn(K,Jr):K);D[g]=or,Y[g]=or-ie}if(a){var ar,Gr=g==="x"?Me:Ne,Yr=g==="x"?He:Ve,yt=D[x],St=x==="y"?"height":"width",lr=yt+y[Gr],Xt=yt-y[Yr],ur=[Me,Ne].indexOf(b)!==-1,Xr=(ar=G==null?void 0:G[x])!=null?ar:0,Qr=ur?lr:yt-A[St]-S[St]-Xr+L.altAxis,Zr=ur?yt+A[St]+S[St]-Xr-L.altAxis:Xt,ei=h&&ur?ay(Qr,yt,Zr):Sr(h?Qr:lr,yt,h?Zr:Xt);D[x]=ei,Y[x]=ei-yt}e.modifiersData[r]=Y}}const zy={name:"preventOverflow",enabled:!0,phase:"main",fn:Ly,requiresIfExists:["offset"]};function $y(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function _y(n){return n===qe(n)||!je(n)?ia(n):$y(n)}function jy(n){var e=n.getBoundingClientRect(),t=er(e.width)/n.offsetWidth||1,r=er(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Hy(n,e,t){t===void 0&&(t=!1);var r=je(e),i=je(e)&&jy(e),s=Gt(e),o=tr(n,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((ht(e)!=="body"||oa(s))&&(a=_y(e)),je(e)?(l=tr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=sa(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Vy(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function Wy(n){var e=Vy(n);return ny.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function qy(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Ky(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var jl={placement:"bottom",modifiers:[],strategy:"absolute"};function Hl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Uy(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?jl:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},jl,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,h={state:c,setOptions:function(b){var v=typeof b=="function"?b(c.options):b;m(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:bn(a)?wr(a):a.contextElement?wr(a.contextElement):[],popper:wr(l)};var C=Wy(Ky([].concat(r,c.options.modifiers)));return c.orderedModifiers=C.filter(function(g){return g.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var b=c.elements,v=b.reference,C=b.popper;if(Hl(v,C)){c.rects={reference:Hy(v,Wr(C),c.options.strategy==="fixed"),popper:na(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var x=c.orderedModifiers[g],D=x.fn,A=x.options,S=A===void 0?{}:A,I=x.name;typeof D=="function"&&(c=D({state:c,options:S,name:I,instance:h})||c)}}}},update:qy(function(){return new Promise(function(y){h.forceUpdate(),y(c)})}),destroy:function(){m(),d=!0}};if(!Hl(a,l))return h;h.setOptions(u).then(function(y){!d&&u.onFirstUpdate&&u.onFirstUpdate(y)});function p(){c.orderedModifiers.forEach(function(y){var b=y.name,v=y.options,C=v===void 0?{}:v,g=y.effect;if(typeof g=="function"){var x=g({state:c,name:b,instance:h,options:C}),D=function(){};f.push(x||D)}})}function m(){f.forEach(function(y){return y()}),f=[]}return h}}var Jy=[yy,Ry,my,nf,By,Oy,zy,fy,My],Gy=Uy({defaultModifiers:Jy}),Yy="tippy-box",ff="tippy-content",Xy="tippy-backdrop",df="tippy-arrow",hf="tippy-svg-arrow",en={passive:!0,capture:!0},pf=function(){return document.body};function Ks(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function aa(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function mf(n,e){return typeof n=="function"?n.apply(void 0,e):n}function Vl(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function Qy(n){return n.split(/\s+/).filter(Boolean)}function Bn(n){return[].concat(n)}function Wl(n,e){n.indexOf(e)===-1&&n.push(e)}function Zy(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function eb(n){return n.split("-")[0]}function Pi(n){return[].slice.call(n)}function ql(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Ar(){return document.createElement("div")}function ys(n){return["Element","Fragment"].some(function(e){return aa(n,e)})}function tb(n){return aa(n,"NodeList")}function nb(n){return aa(n,"MouseEvent")}function rb(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function ib(n){return ys(n)?[n]:tb(n)?Pi(n):Array.isArray(n)?n:Pi(document.querySelectorAll(n))}function Us(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Kl(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function sb(n){var e,t=Bn(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function ob(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,u=eb(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,p=u==="left"?c.right.x:0,m=s.top-r+f>l,y=r-s.bottom-d>l,b=s.left-t+h>l,v=t-s.right-p>l;return m||y||b||v})}function Js(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function Ul(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var it={isTouch:!1},Jl=0;function ab(){it.isTouch||(it.isTouch=!0,window.performance&&document.addEventListener("mousemove",gf))}function gf(){var n=performance.now();n-Jl<20&&(it.isTouch=!1,document.removeEventListener("mousemove",gf)),Jl=n}function lb(){var n=document.activeElement;if(rb(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function ub(){document.addEventListener("touchstart",ab,en),window.addEventListener("blur",lb)}var cb=typeof window<"u"&&typeof document<"u",fb=cb?!!window.msCrypto:!1,db={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},hb={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ye=Object.assign({appendTo:pf,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},db,hb),pb=Object.keys(Ye),mb=function(e){var t=Object.keys(e);t.forEach(function(r){Ye[r]=e[r]})};function yf(n){var e=n.plugins||[],t=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=n[s]!==void 0?n[s]:(a=Ye[s])!=null?a:o}return r},{});return Object.assign({},n,t)}function gb(n,e){var t=e?Object.keys(yf(Object.assign({},Ye,{plugins:e}))):pb,r=t.reduce(function(i,s){var o=(n.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Gl(n,e){var t=Object.assign({},e,{content:mf(e.content,[n])},e.ignoreAttributes?{}:gb(n,e.plugins));return t.aria=Object.assign({},Ye.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var yb=function(){return"innerHTML"};function Co(n,e){n[yb()]=e}function Yl(n){var e=Ar();return n===!0?e.className=df:(e.className=hf,ys(n)?e.appendChild(n):Co(e,n)),e}function Xl(n,e){ys(e.content)?(Co(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Co(n,e.content):n.textContent=e.content)}function Eo(n){var e=n.firstElementChild,t=Pi(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(ff)}),arrow:t.find(function(r){return r.classList.contains(df)||r.classList.contains(hf)}),backdrop:t.find(function(r){return r.classList.contains(Xy)})}}function bf(n){var e=Ar(),t=Ar();t.className=Yy,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Ar();r.className=ff,r.setAttribute("data-state","hidden"),Xl(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(s,o){var a=Eo(e),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Xl(u,n.props),o.arrow?c?s.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(Yl(o.arrow))):l.appendChild(Yl(o.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}bf.$$tippy=!0;var bb=1,li=[],Gs=[];function vb(n,e){var t=Gl(n,Object.assign({},Ye,yf(ql(e)))),r,i,s,o=!1,a=!1,l=!1,u=!1,c,f,d,h=[],p=Vl(Ur,t.interactiveDebounce),m,y=bb++,b=null,v=Zy(t.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},g={id:y,reference:n,popper:Ar(),popperInstance:b,props:t,state:C,plugins:v,clearDelayTimeouts:Qr,setProps:Zr,setContent:ei,show:Hf,hide:Vf,hideWithInteractivity:Wf,enable:ur,disable:Xr,unmount:qf,destroy:Kf};if(!t.render)return g;var x=t.render(g),D=x.popper,A=x.onUpdate;D.setAttribute("data-tippy-root",""),D.id="tippy-"+g.id,g.popper=D,n._tippy=g,D._tippy=g;var S=v.map(function(k){return k.fn(g)}),I=n.hasAttribute("aria-expanded");return wn(),U(),ie(),se("onCreate",[g]),t.showOnCreate&&lr(),D.addEventListener("mouseenter",function(){g.props.interactive&&g.state.isVisible&&g.clearDelayTimeouts()}),D.addEventListener("mouseleave",function(){g.props.interactive&&g.props.trigger.indexOf("mouseenter")>=0&&le().addEventListener("mousemove",p)}),g;function L(){var k=g.props.touch;return Array.isArray(k)?k:[k,0]}function G(){return L()[0]==="hold"}function Y(){var k;return!!((k=g.props.render)!=null&&k.$$tippy)}function H(){return m||n}function le(){var k=H().parentNode;return k?sb(k):document}function Q(){return Eo(D)}function X(k){return g.state.isMounted&&!g.state.isVisible||it.isTouch||c&&c.type==="focus"?0:Ks(g.props.delay,k?0:1,Ye.delay)}function ie(k){k===void 0&&(k=!1),D.style.pointerEvents=g.props.interactive&&!k?"":"none",D.style.zIndex=""+g.props.zIndex}function se(k,M,B){if(B===void 0&&(B=!0),S.forEach(function(j){j[k]&&j[k].apply(j,M)}),B){var V;(V=g.props)[k].apply(V,M)}}function K(){var k=g.props.aria;if(k.content){var M="aria-"+k.content,B=D.id,V=Bn(g.props.triggerTarget||n);V.forEach(function(j){var ke=j.getAttribute(M);if(g.state.isVisible)j.setAttribute(M,ke?ke+" "+B:B);else{var Re=ke&&ke.replace(B,"").trim();Re?j.setAttribute(M,Re):j.removeAttribute(M)}})}}function U(){if(!(I||!g.props.aria.expanded)){var k=Bn(g.props.triggerTarget||n);k.forEach(function(M){g.props.interactive?M.setAttribute("aria-expanded",g.state.isVisible&&M===H()?"true":"false"):M.removeAttribute("aria-expanded")})}}function Be(){le().removeEventListener("mousemove",p),li=li.filter(function(k){return k!==p})}function tt(k){if(!(it.isTouch&&(l||k.type==="mousedown"))){var M=k.composedPath&&k.composedPath()[0]||k.target;if(!(g.props.interactive&&Ul(D,M))){if(Bn(g.props.triggerTarget||n).some(function(B){return Ul(B,M)})){if(it.isTouch||g.state.isVisible&&g.props.trigger.indexOf("click")>=0)return}else se("onClickOutside",[g,k]);g.props.hideOnClick===!0&&(g.clearDelayTimeouts(),g.hide(),a=!0,setTimeout(function(){a=!1}),g.state.isMounted||mt())}}}function Yt(){l=!0}function pt(){l=!1}function Ke(){var k=le();k.addEventListener("mousedown",tt,!0),k.addEventListener("touchend",tt,en),k.addEventListener("touchstart",pt,en),k.addEventListener("touchmove",Yt,en)}function mt(){var k=le();k.removeEventListener("mousedown",tt,!0),k.removeEventListener("touchend",tt,en),k.removeEventListener("touchstart",pt,en),k.removeEventListener("touchmove",Yt,en)}function xn(k,M){Sn(k,function(){!g.state.isVisible&&D.parentNode&&D.parentNode.contains(D)&&M()})}function gt(k,M){Sn(k,M)}function Sn(k,M){var B=Q().box;function V(j){j.target===B&&(Js(B,"remove",V),M())}if(k===0)return M();Js(B,"remove",f),Js(B,"add",V),f=V}function xt(k,M,B){B===void 0&&(B=!1);var V=Bn(g.props.triggerTarget||n);V.forEach(function(j){j.addEventListener(k,M,B),h.push({node:j,eventType:k,handler:M,options:B})})}function wn(){G()&&(xt("touchstart",sr,{passive:!0}),xt("touchend",Jr,{passive:!0})),Qy(g.props.trigger).forEach(function(k){if(k!=="manual")switch(xt(k,sr),k){case"mouseenter":xt("mouseleave",Jr);break;case"focus":xt(fb?"focusout":"blur",or);break;case"focusin":xt("focusout",or);break}})}function Kr(){h.forEach(function(k){var M=k.node,B=k.eventType,V=k.handler,j=k.options;M.removeEventListener(B,V,j)}),h=[]}function sr(k){var M,B=!1;if(!(!g.state.isEnabled||ar(k)||a)){var V=((M=c)==null?void 0:M.type)==="focus";c=k,m=k.currentTarget,U(),!g.state.isVisible&&nb(k)&&li.forEach(function(j){return j(k)}),k.type==="click"&&(g.props.trigger.indexOf("mouseenter")<0||o)&&g.props.hideOnClick!==!1&&g.state.isVisible?B=!0:lr(k),k.type==="click"&&(o=!B),B&&!V&&Xt(k)}}function Ur(k){var M=k.target,B=H().contains(M)||D.contains(M);if(!(k.type==="mousemove"&&B)){var V=St().concat(D).map(function(j){var ke,Re=j._tippy,An=(ke=Re.popperInstance)==null?void 0:ke.state;return An?{popperRect:j.getBoundingClientRect(),popperState:An,props:t}:null}).filter(Boolean);ob(V,k)&&(Be(),Xt(k))}}function Jr(k){var M=ar(k)||g.props.trigger.indexOf("click")>=0&&o;if(!M){if(g.props.interactive){g.hideWithInteractivity(k);return}Xt(k)}}function or(k){g.props.trigger.indexOf("focusin")<0&&k.target!==H()||g.props.interactive&&k.relatedTarget&&D.contains(k.relatedTarget)||Xt(k)}function ar(k){return it.isTouch?G()!==k.type.indexOf("touch")>=0:!1}function Gr(){Yr();var k=g.props,M=k.popperOptions,B=k.placement,V=k.offset,j=k.getReferenceClientRect,ke=k.moveTransition,Re=Y()?Eo(D).arrow:null,An=j?{getBoundingClientRect:j,contextElement:j.contextElement||H()}:n,Ea={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ti){var On=ti.state;if(Y()){var Uf=Q(),Cs=Uf.box;["placement","reference-hidden","escaped"].forEach(function(ni){ni==="placement"?Cs.setAttribute("data-placement",On.placement):On.attributes.popper["data-popper-"+ni]?Cs.setAttribute("data-"+ni,""):Cs.removeAttribute("data-"+ni)}),On.attributes.popper={}}}},Qt=[{name:"offset",options:{offset:V}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ke}},Ea];Y()&&Re&&Qt.push({name:"arrow",options:{element:Re,padding:3}}),Qt.push.apply(Qt,(M==null?void 0:M.modifiers)||[]),g.popperInstance=Gy(An,D,Object.assign({},M,{placement:B,onFirstUpdate:d,modifiers:Qt}))}function Yr(){g.popperInstance&&(g.popperInstance.destroy(),g.popperInstance=null)}function yt(){var k=g.props.appendTo,M,B=H();g.props.interactive&&k===pf||k==="parent"?M=B.parentNode:M=mf(k,[B]),M.contains(D)||M.appendChild(D),g.state.isMounted=!0,Gr()}function St(){return Pi(D.querySelectorAll("[data-tippy-root]"))}function lr(k){g.clearDelayTimeouts(),k&&se("onTrigger",[g,k]),Ke();var M=X(!0),B=L(),V=B[0],j=B[1];it.isTouch&&V==="hold"&&j&&(M=j),M?r=setTimeout(function(){g.show()},M):g.show()}function Xt(k){if(g.clearDelayTimeouts(),se("onUntrigger",[g,k]),!g.state.isVisible){mt();return}if(!(g.props.trigger.indexOf("mouseenter")>=0&&g.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(k.type)>=0&&o)){var M=X(!1);M?i=setTimeout(function(){g.state.isVisible&&g.hide()},M):s=requestAnimationFrame(function(){g.hide()})}}function ur(){g.state.isEnabled=!0}function Xr(){g.hide(),g.state.isEnabled=!1}function Qr(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Zr(k){if(!g.state.isDestroyed){se("onBeforeUpdate",[g,k]),Kr();var M=g.props,B=Gl(n,Object.assign({},M,ql(k),{ignoreAttributes:!0}));g.props=B,wn(),M.interactiveDebounce!==B.interactiveDebounce&&(Be(),p=Vl(Ur,B.interactiveDebounce)),M.triggerTarget&&!B.triggerTarget?Bn(M.triggerTarget).forEach(function(V){V.removeAttribute("aria-expanded")}):B.triggerTarget&&n.removeAttribute("aria-expanded"),U(),ie(),A&&A(M,B),g.popperInstance&&(Gr(),St().forEach(function(V){requestAnimationFrame(V._tippy.popperInstance.forceUpdate)})),se("onAfterUpdate",[g,k])}}function ei(k){g.setProps({content:k})}function Hf(){var k=g.state.isVisible,M=g.state.isDestroyed,B=!g.state.isEnabled,V=it.isTouch&&!g.props.touch,j=Ks(g.props.duration,0,Ye.duration);if(!(k||M||B||V)&&!H().hasAttribute("disabled")&&(se("onShow",[g],!1),g.props.onShow(g)!==!1)){if(g.state.isVisible=!0,Y()&&(D.style.visibility="visible"),ie(),Ke(),g.state.isMounted||(D.style.transition="none"),Y()){var ke=Q(),Re=ke.box,An=ke.content;Us([Re,An],0)}d=function(){var Qt;if(!(!g.state.isVisible||u)){if(u=!0,D.offsetHeight,D.style.transition=g.props.moveTransition,Y()&&g.props.animation){var ks=Q(),ti=ks.box,On=ks.content;Us([ti,On],j),Kl([ti,On],"visible")}K(),U(),Wl(Gs,g),(Qt=g.popperInstance)==null||Qt.forceUpdate(),se("onMount",[g]),g.props.animation&&Y()&&gt(j,function(){g.state.isShown=!0,se("onShown",[g])})}},yt()}}function Vf(){var k=!g.state.isVisible,M=g.state.isDestroyed,B=!g.state.isEnabled,V=Ks(g.props.duration,1,Ye.duration);if(!(k||M||B)&&(se("onHide",[g],!1),g.props.onHide(g)!==!1)){if(g.state.isVisible=!1,g.state.isShown=!1,u=!1,o=!1,Y()&&(D.style.visibility="hidden"),Be(),mt(),ie(!0),Y()){var j=Q(),ke=j.box,Re=j.content;g.props.animation&&(Us([ke,Re],V),Kl([ke,Re],"hidden"))}K(),U(),g.props.animation?Y()&&xn(V,g.unmount):g.unmount()}}function Wf(k){le().addEventListener("mousemove",p),Wl(li,p),p(k)}function qf(){g.state.isVisible&&g.hide(),g.state.isMounted&&(Yr(),St().forEach(function(k){k._tippy.unmount()}),D.parentNode&&D.parentNode.removeChild(D),Gs=Gs.filter(function(k){return k!==g}),g.state.isMounted=!1,se("onHidden",[g]))}function Kf(){g.state.isDestroyed||(g.clearDelayTimeouts(),g.unmount(),Kr(),delete n._tippy,g.state.isDestroyed=!0,se("onDestroy",[g]))}}function qr(n,e){e===void 0&&(e={});var t=Ye.plugins.concat(e.plugins||[]);ub();var r=Object.assign({},e,{plugins:t}),i=ib(n),s=i.reduce(function(o,a){var l=a&&vb(a,r);return l&&o.push(l),o},[]);return ys(n)?s[0]:s}qr.defaultProps=Ye;qr.setDefaultProps=mb;qr.currentInput=it;Object.assign({},nf,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});qr.setDefaultProps({render:bf});var ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Db(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var vf=Db,kb=typeof ui=="object"&&ui&&ui.Object===Object&&ui,Cb=kb,Eb=Cb,xb=typeof self=="object"&&self&&self.Object===Object&&self,Sb=Eb||xb||Function("return this")(),Df=Sb,wb=Df,Ab=function(){return wb.Date.now()},Ob=Ab,Tb=/\s/;function Mb(n){for(var e=n.length;e--&&Tb.test(n.charAt(e)););return e}var Nb=Mb,Fb=Nb,Bb=/^\s+/;function Ib(n){return n&&n.slice(0,Fb(n)+1).replace(Bb,"")}var Rb=Ib,Pb=Df,Lb=Pb.Symbol,kf=Lb,Ql=kf,Cf=Object.prototype,zb=Cf.hasOwnProperty,$b=Cf.toString,dr=Ql?Ql.toStringTag:void 0;function _b(n){var e=zb.call(n,dr),t=n[dr];try{n[dr]=void 0;var r=!0}catch{}var i=$b.call(n);return r&&(e?n[dr]=t:delete n[dr]),i}var jb=_b,Hb=Object.prototype,Vb=Hb.toString;function Wb(n){return Vb.call(n)}var qb=Wb,Zl=kf,Kb=jb,Ub=qb,Jb="[object Null]",Gb="[object Undefined]",eu=Zl?Zl.toStringTag:void 0;function Yb(n){return n==null?n===void 0?Gb:Jb:eu&&eu in Object(n)?Kb(n):Ub(n)}var Xb=Yb;function Qb(n){return n!=null&&typeof n=="object"}var Zb=Qb,ev=Xb,tv=Zb,nv="[object Symbol]";function rv(n){return typeof n=="symbol"||tv(n)&&ev(n)==nv}var iv=rv,sv=Rb,tu=vf,ov=iv,nu=0/0,av=/^[-+]0x[0-9a-f]+$/i,lv=/^0b[01]+$/i,uv=/^0o[0-7]+$/i,cv=parseInt;function fv(n){if(typeof n=="number")return n;if(ov(n))return nu;if(tu(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=tu(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=sv(n);var t=lv.test(n);return t||uv.test(n)?cv(n.slice(2),t?2:8):av.test(n)?nu:+n}var dv=fv,hv=vf,Ys=Ob,ru=dv,pv="Expected a function",mv=Math.max,gv=Math.min;function yv(n,e,t){var r,i,s,o,a,l,u=0,c=!1,f=!1,d=!0;if(typeof n!="function")throw new TypeError(pv);e=ru(e)||0,hv(t)&&(c=!!t.leading,f="maxWait"in t,s=f?mv(ru(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function h(D){var A=r,S=i;return r=i=void 0,u=D,o=n.apply(S,A),o}function p(D){return u=D,a=setTimeout(b,e),c?h(D):o}function m(D){var A=D-l,S=D-u,I=e-A;return f?gv(I,s-S):I}function y(D){var A=D-l,S=D-u;return l===void 0||A>=e||A<0||f&&S>=s}function b(){var D=Ys();if(y(D))return v(D);a=setTimeout(b,m(D))}function v(D){return a=void 0,d&&r?h(D):(r=i=void 0,o)}function C(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function g(){return a===void 0?o:v(Ys())}function x(){var D=Ys(),A=y(D);if(r=arguments,i=this,l=D,A){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(b,e),h(l)}return a===void 0&&(a=setTimeout(b,e)),o}return x.cancel=C,x.flush=g,x}var bv=yv;class vv{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:u,to:c})=>{const{doc:f,selection:d}=l,{empty:h}=d,p=!f.textBetween(u,c).length&&Jo(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.updateHandler=(a,l)=>{var u,c,f;const{state:d,composing:h}=a,{doc:p,selection:m}=d,y=l&&l.doc.eq(p)&&l.selection.eq(m);if(h||y)return;this.createTooltip();const{ranges:b}=m,v=Math.min(...b.map(x=>x.$from.pos)),C=Math.max(...b.map(x=>x.$to.pos));if(!((u=this.shouldShow)===null||u===void 0?void 0:u.call(this,{editor:this.editor,view:a,state:d,oldState:l,from:v,to:C}))){this.hide();return}(c=this.tippy)===null||c===void 0||c.setProps({getReferenceClientRect:((f=this.tippyOptions)===null||f===void 0?void 0:f.getReferenceClientRect)||(()=>{if(mg(d.selection)){const x=a.nodeDOM(v);if(x)return x.getBoundingClientRect()}return gg(a,v,C)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=qr(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.$from.pos!==r.selection.$to.pos;this.updateDelay>0&&i?bv(this.updateHandler,this.updateDelay)(e,t):this.updateHandler(e,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Dv=n=>new De({key:typeof n.pluginKey=="string"?new We(n.pluginKey):n.pluginKey,view:e=>new vv({view:e,...n})}),kv=Ae.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Dv({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function la(n){this.j={},this.jr=[],this.jd=null,this.t=n}la.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var r=t,i=this.j[e];if(i)return r&&(i.t=r),i;i=W();var s=Li(this,e);return s?(Object.assign(i.j,s.j),i.jr.append(s.jr),i.jr=s.jd,i.t=r||s.t):i.t=r,this.j[e]=i,i}};var W=function(){return new la},N=function(e){return new la(e)},w=function(e,t,r){e.j[t]||(e.j[t]=r)},ue=function(e,t,r){e.jr.push([t,r])},Li=function(e,t){var r=e.j[t];if(r)return r;for(var i=0;i<e.jr.length;i++){var s=e.jr[i][0],o=e.jr[i][1];if(s.test(t))return o}return e.jd},$=function(e,t,r){for(var i=0;i<t.length;i++)w(e,t[i],r)},Cv=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0],s=t[r][1];w(e,i,s)}},Zt=function(e,t,r,i){for(var s=0,o=t.length,a;s<o&&(a=e.j[t[s]]);)e=a,s++;if(s>=o)return[];for(;s<o-1;)a=i(),w(e,t[s],a),e=a,s++;w(e,t[o-1],r)},Ue="DOMAIN",vt="LOCALHOST",rt="TLD",Pe="NUM",rr="PROTOCOL",ua="MAILTO",Ef="WS",ca="NL",Ln="OPENBRACE",Or="OPENBRACKET",Tr="OPENANGLEBRACKET",Mr="OPENPAREN",rn="CLOSEBRACE",zn="CLOSEBRACKET",$n="CLOSEANGLEBRACKET",_n="CLOSEPAREN",zi="AMPERSAND",$i="APOSTROPHE",_i="ASTERISK",jn="AT",ji="BACKSLASH",Hi="BACKTICK",Vi="CARET",Nr="COLON",fa="COMMA",Wi="DOLLAR",Mt="DOT",qi="EQUALS",da="EXCLAMATION",Ki="HYPHEN",Ui="PERCENT",Ji="PIPE",Gi="PLUS",Yi="POUND",Xi="QUERY",ha="QUOTE",pa="SEMI",Dt="SLASH",Qi="TILDE",Zi="UNDERSCORE",es="SYM",Ev=Object.freeze({__proto__:null,DOMAIN:Ue,LOCALHOST:vt,TLD:rt,NUM:Pe,PROTOCOL:rr,MAILTO:ua,WS:Ef,NL:ca,OPENBRACE:Ln,OPENBRACKET:Or,OPENANGLEBRACKET:Tr,OPENPAREN:Mr,CLOSEBRACE:rn,CLOSEBRACKET:zn,CLOSEANGLEBRACKET:$n,CLOSEPAREN:_n,AMPERSAND:zi,APOSTROPHE:$i,ASTERISK:_i,AT:jn,BACKSLASH:ji,BACKTICK:Hi,CARET:Vi,COLON:Nr,COMMA:fa,DOLLAR:Wi,DOT:Mt,EQUALS:qi,EXCLAMATION:da,HYPHEN:Ki,PERCENT:Ui,PIPE:Ji,PLUS:Gi,POUND:Yi,QUERY:Xi,QUOTE:ha,SEMI:pa,SLASH:Dt,TILDE:Qi,UNDERSCORE:Zi,SYM:es}),iu="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermögensberater-ctb vermögensberatung-pwb ελ ευ бг бел дети ею католик ком қаз мкд мон москва онлайн орг рус рф сайт срб укр გე հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بھارت بيتك پاکستان ڀارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ 닷넷 닷컴 삼성 한국 アマゾン グーグル クラウド コム ストア セール ファッション ポイント みんな 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大众汽车 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港".split(" "),hr=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,pr=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,mr=/\uFE0F/,gr=/\d/,su=/\s/;function xv(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=W(),t=N(Pe),r=N(Ue),i=W(),s=N(Ef),o=[[gr,r],[hr,r],[pr,r],[mr,r]],a=function(){var g=N(Ue);return g.j={"-":i},g.jr=[].concat(o),g},l=function(g){var x=a();return x.t=g,x};Cv(e,[["'",N($i)],["{",N(Ln)],["[",N(Or)],["<",N(Tr)],["(",N(Mr)],["}",N(rn)],["]",N(zn)],[">",N($n)],[")",N(_n)],["&",N(zi)],["*",N(_i)],["@",N(jn)],["`",N(Hi)],["^",N(Vi)],[":",N(Nr)],[",",N(fa)],["$",N(Wi)],[".",N(Mt)],["=",N(qi)],["!",N(da)],["-",N(Ki)],["%",N(Ui)],["|",N(Ji)],["+",N(Gi)],["#",N(Yi)],["?",N(Xi)],['"',N(ha)],["/",N(Dt)],[";",N(pa)],["~",N(Qi)],["_",N(Zi)],["\\",N(ji)]]),w(e,`
`,N(ca)),ue(e,su,s),w(s,`
`,W()),ue(s,su,s);for(var u=0;u<iu.length;u++)Zt(e,iu[u],l(rt),a);var c=a(),f=a(),d=a(),h=a();Zt(e,"file",c,a),Zt(e,"ftp",f,a),Zt(e,"http",d,a),Zt(e,"mailto",h,a);var p=a(),m=N(rr),y=N(ua);w(f,"s",p),w(f,":",m),w(d,"s",p),w(d,":",m),w(c,":",m),w(p,":",m),w(h,":",y);for(var b=a(),v=0;v<n.length;v++)Zt(e,n[v],b,a);return w(b,":",m),Zt(e,"localhost",l(vt),a),ue(e,gr,t),ue(e,hr,r),ue(e,pr,r),ue(e,mr,r),ue(t,gr,t),ue(t,hr,r),ue(t,pr,r),ue(t,mr,r),w(t,"-",i),w(r,"-",i),w(i,"-",i),ue(r,gr,r),ue(r,hr,r),ue(r,pr,r),ue(r,mr,r),ue(i,gr,r),ue(i,hr,r),ue(i,pr,r),ue(i,mr,r),e.jd=N(es),e}function Sv(n,e){for(var t=wv(e.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),r=t.length,i=[],s=0,o=0;o<r;){for(var a=n,l=null,u=0,c=null,f=-1,d=-1;o<r&&(l=Li(a,t[o]));)a=l,a.accepts()?(f=0,d=0,c=a):f>=0&&(f+=t[o].length,d++),u+=t[o].length,s+=t[o].length,o++;s-=f,o-=d,u-=f,i.push({t:c.t,v:e.substr(s-u,u),s:s-u,e:s})}return i}function wv(n){for(var e=[],t=n.length,r=0;r<t;){var i=n.charCodeAt(r),s=void 0,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function mi(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mi=function(e){return typeof e}:mi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(n)}var ye={defaultProtocol:"http",events:null,format:ou,formatHref:ou,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Av(n){n=n||{},this.defaultProtocol="defaultProtocol"in n?n.defaultProtocol:ye.defaultProtocol,this.events="events"in n?n.events:ye.events,this.format="format"in n?n.format:ye.format,this.formatHref="formatHref"in n?n.formatHref:ye.formatHref,this.nl2br="nl2br"in n?n.nl2br:ye.nl2br,this.tagName="tagName"in n?n.tagName:ye.tagName,this.target="target"in n?n.target:ye.target,this.rel="rel"in n?n.rel:ye.rel,this.validate="validate"in n?n.validate:ye.validate,this.truncate="truncate"in n?n.truncate:ye.truncate,this.className="className"in n?n.className:ye.className,this.attributes=n.attributes||ye.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in n)?n.ignoreTags:ye.ignoreTags,t=0;t<e.length;t++)this.ignoreTags.push(e[t].toUpperCase())}Av.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,r){var i=this[e];if(!i)return i;var s;switch(mi(i)){case"function":return i(t,r.t);case"object":return s=r.t in i?i[r.t]:ye[e],typeof s=="function"?s(t,r.t):s}return i},getObject:function(e,t,r){var i=this[e];return typeof i=="function"?i(t,r.t):i}};function ou(n){return n}function Ov(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(n.prototype);for(var i in t)r[i]=t[i];return r.constructor=e,e.prototype=r,e}function ts(){}ts.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ye.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function En(n,e){function t(r,i){this.t=n,this.v=r,this.tk=i}return Ov(ts,t,e),t}var xf=En("email",{isLink:!0}),xo=En("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),So=En("text"),Sf=En("nl"),Ot=En("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ye.defaultProtocol,t=this.tk,r=!1,i=!1,s=[],o=0;t[o].t===rr;)r=!0,s.push(t[o].v),o++;for(;t[o].t===Dt;)i=!0,s.push(t[o].v),o++;for(;o<t.length;o++)s.push(t[o].v);return s=s.join(""),r||i||(s="".concat(e,"://").concat(s)),s},hasProtocol:function(){return this.tk[0].t===rr}}),Tv=Object.freeze({__proto__:null,MultiToken:ts,Base:ts,createTokenClass:En,MailtoEmail:xf,Email:xo,Text:So,Nl:Sf,Url:Ot});function Mv(){var n=W(),e=W(),t=W(),r=W(),i=W(),s=W(),o=W(),a=N(Ot),l=W(),u=N(Ot),c=N(Ot),f=W(),d=W(),h=W(),p=W(),m=W(),y=N(Ot),b=N(Ot),v=N(Ot),C=N(Ot),g=W(),x=W(),D=W(),A=W(),S=W(),I=W(),L=N(xo),G=W(),Y=N(xo),H=N(xf),le=W(),Q=W(),X=W(),ie=W(),se=N(Sf);w(n,ca,se),w(n,rr,e),w(n,ua,t),w(e,Dt,r),w(r,Dt,i),w(n,rt,s),w(n,Ue,s),w(n,vt,a),w(n,Pe,s),w(i,rt,c),w(i,Ue,c),w(i,Pe,c),w(i,vt,c),w(s,Mt,o),w(S,Mt,I),w(o,rt,a),w(o,Ue,s),w(o,Pe,s),w(o,vt,s),w(I,rt,L),w(I,Ue,S),w(I,Pe,S),w(I,vt,S),w(a,Mt,o),w(L,Mt,I),w(a,Nr,l),w(a,Dt,c),w(l,Pe,u),w(u,Dt,c),w(L,Nr,G),w(G,Pe,Y);var K=[zi,_i,jn,ji,Hi,Vi,Wi,Ue,qi,Ki,vt,Pe,Ui,Ji,Gi,Yi,rr,Dt,es,Qi,rt,Zi],U=[$i,$n,rn,zn,_n,Nr,fa,Mt,da,Tr,Ln,Or,Mr,Xi,ha,pa];w(c,Ln,d),w(c,Or,h),w(c,Tr,p),w(c,Mr,m),w(f,Ln,d),w(f,Or,h),w(f,Tr,p),w(f,Mr,m),w(d,rn,c),w(h,zn,c),w(p,$n,c),w(m,_n,c),w(y,rn,c),w(b,zn,c),w(v,$n,c),w(C,_n,c),w(g,rn,c),w(x,zn,c),w(D,$n,c),w(A,_n,c),$(d,K,y),$(h,K,b),$(p,K,v),$(m,K,C),$(d,U,g),$(h,U,x),$(p,U,D),$(m,U,A),$(y,K,y),$(b,K,b),$(v,K,v),$(C,K,C),$(y,U,y),$(b,U,b),$(v,U,v),$(C,U,C),$(g,K,y),$(x,K,b),$(D,K,v),$(A,K,C),$(g,U,g),$(x,U,x),$(D,U,D),$(A,U,A),$(c,K,c),$(f,K,c),$(c,U,f),$(f,U,f),w(t,rt,H),w(t,Ue,H),w(t,Pe,H),w(t,vt,H),$(H,K,H),$(H,U,le),$(le,K,H),$(le,U,le);var Be=[zi,$i,_i,ji,Hi,Vi,rn,Wi,Ue,qi,Ki,Pe,Ln,Ui,Ji,Gi,Yi,Xi,Dt,es,Qi,rt,Zi];return $(s,Be,Q),w(s,jn,X),$(a,Be,Q),w(a,jn,X),$(o,Be,Q),$(Q,Be,Q),w(Q,jn,X),w(Q,Mt,ie),$(ie,Be,Q),w(X,rt,S),w(X,Ue,S),w(X,Pe,S),w(X,vt,L),n}function Nv(n,e,t){for(var r=t.length,i=0,s=[],o=[];i<r;){for(var a=n,l=null,u=null,c=0,f=null,d=-1;i<r&&!(l=Li(a,t[i].t));)o.push(t[i++]);for(;i<r&&(u=l||Li(a,t[i].t));)l=null,a=u,a.accepts()?(d=0,f=a):d>=0&&d++,i++,c++;if(d<0)for(var h=i-c;h<i;h++)o.push(t[h]);else{o.length>0&&(s.push(Xs(So,e,o)),o=[]),i-=d,c-=d;var p=f.t,m=t.slice(i-c,i);s.push(Xs(p,e,m))}}return o.length>0&&s.push(Xs(So,e,o)),s}function Xs(n,e,t){var r=t[0].s,i=t[t.length-1].e,s=e.substr(r,i-r);return new n(s,t)}var Fv=typeof console<"u"&&console&&console.warn||function(){},ce={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function Bv(){ce.scanner=null,ce.parser=null,ce.pluginQueue=[],ce.customProtocols=[],ce.initialized=!1}function Iv(n){if(ce.initialized&&Fv('linkifyjs: already initialized - will not register custom protocol "'.concat(n,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(n))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");ce.customProtocols.push(n)}function Rv(){ce.scanner={start:xv(ce.customProtocols),tokens:Ev},ce.parser={start:Mv(),tokens:Tv};for(var n={createTokenClass:En},e=0;e<ce.pluginQueue.length;e++)ce.pluginQueue[e][1]({scanner:ce.scanner,parser:ce.parser,utils:n});ce.initialized=!0}function wf(n){return ce.initialized||Rv(),Nv(ce.parser.start,n,Sv(ce.scanner.start,n))}function ma(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=wf(n),r=[],i=0;i<t.length;i++){var s=t[i];s.isLink&&(!e||s.t===e)&&r.push(s.toObject())}return r}function au(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=wf(n);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}function Pv(n){return new De({key:new We("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=rg(t.doc,[...e]),{mapping:l}=a;if(dg(a).forEach(({oldRange:c,newRange:f})=>{Bi(c.from,c.to,t.doc).filter(m=>m.mark.type===n.type).forEach(m=>{const y=l.map(m.from),b=l.map(m.to),v=Bi(y,b,r.doc).filter(S=>S.mark.type===n.type);if(!v.length)return;const C=v[0],g=t.doc.textBetween(m.from,m.to,void 0," "),x=r.doc.textBetween(C.from,C.to,void 0," "),D=au(g),A=au(x);D&&!A&&o.removeMark(C.from,C.to,n.type)});const d=sg(r.doc,f,m=>m.isTextblock);let h,p;if(d.length>1?(h=d[0],p=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(h=d[0],p=r.doc.textBetween(h.pos,f.to,void 0," ")),h&&p){const m=p.split(" ").filter(v=>v!=="");if(m.length<=0)return!1;const y=m[m.length-1],b=h.pos+p.lastIndexOf(y);if(!y)return!1;ma(y).filter(v=>v.isLink).filter(v=>n.validate?n.validate(v.value):!0).map(v=>({...v,from:b+v.start+1,to:b+v.end+1})).forEach(v=>{o.addMark(v.from,v.to,n.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function Lv(n){return new De({key:new We("handleClickLink"),props:{handleClick:(e,t,r)=>{var i;const s=Uc(e.state,n.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&s.href?(window.open(s.href,s.target),!0):!1}}})}function zv(n){return new De({key:new We("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(u=>{a+=u.textContent});const l=ma(a).find(u=>u.isLink&&u.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const $v=dt.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(Iv)},onDestroy(){Bv()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yn({find:n=>ma(n).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(Pv({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(Lv({type:this.type})),this.options.linkOnPaste&&n.push(zv({editor:this.editor,type:this.type})),n}}),Fr=/^[a-z0-9]+(-[a-z0-9]+)*$/,bs=(n,e,t,r="")=>{const i=n.split(":");if(n.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),u={provider:i.length>0?i[0]:r,prefix:l,name:a};return e&&!gi(u)?null:u}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:r,prefix:o.shift(),name:o.join("-")};return e&&!gi(a)?null:a}if(t&&r===""){const a={provider:r,prefix:"",name:s};return e&&!gi(a,t)?null:a}return null},gi=(n,e)=>n?!!((n.provider===""||n.provider.match(Fr))&&(e&&n.prefix===""||n.prefix.match(Fr))&&n.name.match(Fr)):!1,Af=Object.freeze({left:0,top:0,width:16,height:16}),ns=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),vs=Object.freeze({...Af,...ns}),wo=Object.freeze({...vs,body:"",hidden:!1});function _v(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const r=((n.rotate||0)+(e.rotate||0))%4;return r&&(t.rotate=r),t}function lu(n,e){const t=_v(n,e);for(const r in wo)r in ns?r in n&&!(r in t)&&(t[r]=ns[r]):r in e?t[r]=e[r]:r in n&&(t[r]=n[r]);return t}function jv(n,e){const t=n.icons,r=n.aliases||Object.create(null),i=Object.create(null);function s(o){if(t[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=r[o]&&r[o].parent,l=a&&s(a);l&&(i[o]=[a].concat(l))}return i[o]}return(e||Object.keys(t).concat(Object.keys(r))).forEach(s),i}function Hv(n,e,t){const r=n.icons,i=n.aliases||Object.create(null);let s={};function o(a){s=lu(r[a]||i[a],s)}return o(e),t.forEach(o),lu(n,s)}function Of(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(i=>{e(i,null),t.push(i)});const r=jv(n);for(const i in r){const s=r[i];s&&(e(i,Hv(n,i,s)),t.push(i))}return t}const Vv={provider:"",aliases:{},not_found:{},...Af};function Qs(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function Tf(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Qs(n,Vv))return null;const t=e.icons;for(const i in t){const s=t[i];if(!i.match(Fr)||typeof s.body!="string"||!Qs(s,wo))return null}const r=e.aliases||Object.create(null);for(const i in r){const s=r[i],o=s.parent;if(!i.match(Fr)||typeof o!="string"||!t[o]&&!r[o]||!Qs(s,wo))return null}return e}const uu=Object.create(null);function Wv(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function vn(n,e){const t=uu[n]||(uu[n]=Object.create(null));return t[e]||(t[e]=Wv(n,e))}function ga(n,e){return Tf(e)?Of(e,(t,r)=>{r?n.icons[t]=r:n.missing.add(t)}):[]}function qv(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}let _r=!1;function Mf(n){return typeof n=="boolean"&&(_r=n),_r}function Kv(n){const e=typeof n=="string"?bs(n,!0,_r):n;if(e){const t=vn(e.provider,e.prefix),r=e.name;return t.icons[r]||(t.missing.has(r)?null:void 0)}}function Uv(n,e){const t=bs(n,!0,_r);if(!t)return!1;const r=vn(t.provider,t.prefix);return qv(r,t.name,e)}function Jv(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),_r&&!e&&!n.prefix){let i=!1;return Tf(n)&&(n.prefix="",Of(n,(s,o)=>{o&&Uv(s,o)&&(i=!0)})),i}const t=n.prefix;if(!gi({provider:e,prefix:t,name:"a"}))return!1;const r=vn(e,t);return!!ga(r,n)}const Nf=Object.freeze({width:null,height:null}),Ff=Object.freeze({...Nf,...ns}),Gv=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Yv=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function cu(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const r=n.split(Gv);if(r===null||!r.length)return n;const i=[];let s=r.shift(),o=Yv.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*e*t)/t)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");o=!o}}const Xv=n=>n==="unset"||n==="undefined"||n==="none";function Qv(n,e){const t={...vs,...n},r={...Ff,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let s=t.body;[t,r].forEach(p=>{const m=[],y=p.hFlip,b=p.vFlip;let v=p.rotate;y?b?v+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):b&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let C;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:C=i.height/2+i.top,m.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:C=i.width/2+i.left,m.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}v%2===1&&(i.left!==i.top&&(C=i.left,i.left=i.top,i.top=C),i.width!==i.height&&(C=i.width,i.width=i.height,i.height=C)),m.length&&(s='<g transform="'+m.join(" ")+'">'+s+"</g>")});const o=r.width,a=r.height,l=i.width,u=i.height;let c,f;o===null?(f=a===null?"1em":a==="auto"?u:a,c=cu(f,l/u)):(c=o==="auto"?l:o,f=a===null?cu(c,u/l):a==="auto"?u:a);const d={},h=(p,m)=>{Xv(m)||(d[p]=m.toString())};return h("width",c),h("height",f),d.viewBox=i.left.toString()+" "+i.top.toString()+" "+l.toString()+" "+u.toString(),{attributes:d,body:s}}const Zv=/\sid="(\S+)"/g,eD="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let tD=0;function nD(n,e=eD){const t=[];let r;for(;r=Zv.exec(n);)t.push(r[1]);if(!t.length)return n;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(s=>{const o=typeof e=="function"?e(s):e+(tD++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+i+"$3")}),n=n.replace(new RegExp(i,"g"),""),n}const Ao=Object.create(null);function rD(n,e){Ao[n]=e}function Oo(n){return Ao[n]||Ao[""]}function ya(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const ba=Object.create(null),yr=["https://api.simplesvg.com","https://api.unisvg.com"],yi=[];for(;yr.length>0;)yr.length===1||Math.random()>.5?yi.push(yr.shift()):yi.push(yr.pop());ba[""]=ya({resources:["https://api.iconify.design"].concat(yi)});function iD(n,e){const t=ya(e);return t===null?!1:(ba[n]=t,!0)}function va(n){return ba[n]}const sD=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let fu=sD();function oD(n,e){const t=va(n);if(!t)return 0;let r;if(!t.maxURL)r=0;else{let i=0;t.resources.forEach(o=>{i=Math.max(i,o.length)});const s=e+".json?icons=";r=t.maxURL-i-t.path.length-s.length}return r}function aD(n){return n===404}const lD=(n,e,t)=>{const r=[],i=oD(n,e),s="icons";let o={type:s,provider:n,prefix:e,icons:[]},a=0;return t.forEach((l,u)=>{a+=l.length+1,a>=i&&u>0&&(r.push(o),o={type:s,provider:n,prefix:e,icons:[]},a=l.length),o.icons.push(l)}),r.push(o),r};function uD(n){if(typeof n=="string"){const e=va(n);if(e)return e.path}return"/"}const cD=(n,e,t)=>{if(!fu){t("abort",424);return}let r=uD(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});r+=s+".json?"+l.toString();break}case"custom":{const s=e.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:t("abort",400);return}let i=503;fu(n+r).then(s=>{const o=s.status;if(o!==200){setTimeout(()=>{t(aD(o)?"abort":"next",o)});return}return i=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?t("abort",s):t("next",i)});return}setTimeout(()=>{t("success",s)})}).catch(()=>{t("next",i)})},fD={prepare:lD,send:cD};function dD(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((i,s)=>i.provider!==s.provider?i.provider.localeCompare(s.provider):i.prefix!==s.prefix?i.prefix.localeCompare(s.prefix):i.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return n.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const s=i.provider,o=i.prefix,a=i.name,l=t[s]||(t[s]=Object.create(null)),u=l[o]||(l[o]=vn(s,o));let c;a in u.icons?c=e.loaded:o===""||u.missing.has(a)?c=e.missing:c=e.pending;const f={provider:s,prefix:o,name:a};c.push(f)}),e}function Bf(n,e){n.forEach(t=>{const r=t.loaderCallbacks;r&&(t.loaderCallbacks=r.filter(i=>i.id!==e))})}function hD(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const r=n.provider,i=n.prefix;e.forEach(s=>{const o=s.icons,a=o.pending.length;o.pending=o.pending.filter(l=>{if(l.prefix!==i)return!0;const u=l.name;if(n.icons[u])o.loaded.push({provider:r,prefix:i,name:u});else if(n.missing.has(u))o.missing.push({provider:r,prefix:i,name:u});else return t=!0,!0;return!1}),o.pending.length!==a&&(t||Bf([n],s.id),s.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),s.abort))})}))}let pD=0;function mD(n,e,t){const r=pD++,i=Bf.bind(null,t,r);if(!e.pending.length)return i;const s={id:r,icons:e,callback:n,abort:i};return t.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(s)}),i}function gD(n,e=!0,t=!1){const r=[];return n.forEach(i=>{const s=typeof i=="string"?bs(i,e,t):i;s&&r.push(s)}),r}var yD={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function bD(n,e,t,r){const i=n.resources.length,s=n.random?Math.floor(Math.random()*i):n.index;let o;if(n.random){let D=n.resources.slice(0);for(o=[];D.length>1;){const A=Math.floor(Math.random()*D.length);o.push(D[A]),D=D.slice(0,A).concat(D.slice(A+1))}o=o.concat(D)}else o=n.resources.slice(s).concat(n.resources.slice(0,s));const a=Date.now();let l="pending",u=0,c,f=null,d=[],h=[];typeof r=="function"&&h.push(r);function p(){f&&(clearTimeout(f),f=null)}function m(){l==="pending"&&(l="aborted"),p(),d.forEach(D=>{D.status==="pending"&&(D.status="aborted")}),d=[]}function y(D,A){A&&(h=[]),typeof D=="function"&&h.push(D)}function b(){return{startTime:a,payload:e,status:l,queriesSent:u,queriesPending:d.length,subscribe:y,abort:m}}function v(){l="failed",h.forEach(D=>{D(void 0,c)})}function C(){d.forEach(D=>{D.status==="pending"&&(D.status="aborted")}),d=[]}function g(D,A,S){const I=A!=="success";switch(d=d.filter(L=>L!==D),l){case"pending":break;case"failed":if(I||!n.dataAfterTimeout)return;break;default:return}if(A==="abort"){c=S,v();return}if(I){c=S,d.length||(o.length?x():v());return}if(p(),C(),!n.random){const L=n.resources.indexOf(D.resource);L!==-1&&L!==n.index&&(n.index=L)}l="completed",h.forEach(L=>{L(S)})}function x(){if(l!=="pending")return;p();const D=o.shift();if(D===void 0){if(d.length){f=setTimeout(()=>{p(),l==="pending"&&(C(),v())},n.timeout);return}v();return}const A={status:"pending",resource:D,callback:(S,I)=>{g(A,S,I)}};d.push(A),u++,f=setTimeout(x,n.rotate),t(D,e,A.callback)}return setTimeout(x),b}function If(n){const e={...yD,...n};let t=[];function r(){t=t.filter(a=>a().status==="pending")}function i(a,l,u){const c=bD(e,a,l,(f,d)=>{r(),u&&u(f,d)});return t.push(c),c}function s(a){return t.find(l=>a(l))||null}return{query:i,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:r}}function du(){}const Zs=Object.create(null);function vD(n){if(!Zs[n]){const e=va(n);if(!e)return;const t=If(e),r={config:e,redundancy:t};Zs[n]=r}return Zs[n]}function DD(n,e,t){let r,i;if(typeof n=="string"){const s=Oo(n);if(!s)return t(void 0,424),du;i=s.send;const o=vD(n);o&&(r=o.redundancy)}else{const s=ya(n);if(s){r=If(s);const o=n.resources?n.resources[0]:"",a=Oo(o);a&&(i=a.send)}}return!r||!i?(t(void 0,424),du):r.query(e,i,t)().abort}const hu="iconify2",jr="iconify",Rf=jr+"-count",pu=jr+"-version",Pf=36e5,kD=168;function To(n,e){try{return n.getItem(e)}catch{}}function Da(n,e,t){try{return n.setItem(e,t),!0}catch{}}function mu(n,e){try{n.removeItem(e)}catch{}}function Mo(n,e){return Da(n,Rf,e.toString())}function No(n){return parseInt(To(n,Rf))||0}const Ds={local:!0,session:!0},Lf={local:new Set,session:new Set};let ka=!1;function CD(n){ka=n}let ci=typeof window>"u"?{}:window;function zf(n){const e=n+"Storage";try{if(ci&&ci[e]&&typeof ci[e].length=="number")return ci[e]}catch{}Ds[n]=!1}function $f(n,e){const t=zf(n);if(!t)return;const r=To(t,pu);if(r!==hu){if(r){const a=No(t);for(let l=0;l<a;l++)mu(t,jr+l.toString())}Da(t,pu,hu),Mo(t,0);return}const i=Math.floor(Date.now()/Pf)-kD,s=a=>{const l=jr+a.toString(),u=To(t,l);if(typeof u=="string"){try{const c=JSON.parse(u);if(typeof c=="object"&&typeof c.cached=="number"&&c.cached>i&&typeof c.provider=="string"&&typeof c.data=="object"&&typeof c.data.prefix=="string"&&e(c,a))return!0}catch{}mu(t,l)}};let o=No(t);for(let a=o-1;a>=0;a--)s(a)||(a===o-1?(o--,Mo(t,o)):Lf[n].add(a))}function _f(){if(!ka){CD(!0);for(const n in Ds)$f(n,e=>{const t=e.data,r=e.provider,i=t.prefix,s=vn(r,i);if(!ga(s,t).length)return!1;const o=t.lastModified||-1;return s.lastModifiedCached=s.lastModifiedCached?Math.min(s.lastModifiedCached,o):o,!0})}}function ED(n,e){const t=n.lastModifiedCached;if(t&&t>=e)return t===e;if(n.lastModifiedCached=e,t)for(const r in Ds)$f(r,i=>{const s=i.data;return i.provider!==n.provider||s.prefix!==n.prefix||s.lastModified===e});return!0}function xD(n,e){ka||_f();function t(r){let i;if(!Ds[r]||!(i=zf(r)))return;const s=Lf[r];let o;if(s.size)s.delete(o=Array.from(s).shift());else if(o=No(i),!Mo(i,o+1))return;const a={cached:Math.floor(Date.now()/Pf),provider:n.provider,data:e};return Da(i,jr+o.toString(),JSON.stringify(a))}e.lastModified&&!ED(n,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),t("local")||t("session"))}function gu(){}function SD(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,hD(n)}))}function wD(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:r}=n,i=n.iconsToLoad;delete n.iconsToLoad;let s;if(!i||!(s=Oo(t)))return;s.prepare(t,r,i).forEach(a=>{DD(t,a,l=>{if(typeof l!="object")a.icons.forEach(u=>{n.missing.add(u)});else try{const u=ga(n,l);if(!u.length)return;const c=n.pendingIcons;c&&u.forEach(f=>{c.delete(f)}),xD(n,l)}catch(u){console.error(u)}SD(n)})})}))}const AD=(n,e)=>{const t=gD(n,!0,Mf()),r=dD(t);if(!r.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(r.loaded,r.missing,r.pending,gu)}),()=>{l=!1}}const i=Object.create(null),s=[];let o,a;return r.pending.forEach(l=>{const{provider:u,prefix:c}=l;if(c===a&&u===o)return;o=u,a=c,s.push(vn(u,c));const f=i[u]||(i[u]=Object.create(null));f[c]||(f[c]=[])}),r.pending.forEach(l=>{const{provider:u,prefix:c,name:f}=l,d=vn(u,c),h=d.pendingIcons||(d.pendingIcons=new Set);h.has(f)||(h.add(f),i[u][c].push(f))}),s.forEach(l=>{const{provider:u,prefix:c}=l;i[u][c].length&&wD(l,i[u][c])}),e?mD(e,r,s):gu};function OD(n,e){const t={...n};for(const r in e){const i=e[r],s=typeof i;r in Nf?(i===null||i&&(s==="string"||s==="number"))&&(t[r]=i):s===typeof t[r]&&(t[r]=r==="rotate"?i%4:i)}return t}const TD=/[\s,]+/;function MD(n,e){e.split(TD).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function ND(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(n);return isNaN(i)?0:r(i)}else if(t!==n){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let s=parseFloat(n.slice(0,n.length-t.length));return isNaN(s)?0:(s=s/i,s%1===0?r(s):0)}}return e}function FD(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)t+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function BD(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function ID(n){return'url("data:image/svg+xml,'+BD(n)+'")'}const yu={...Ff,inline:!1},RD={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},PD={display:"inline-block"},Fo={"background-color":"currentColor"},jf={"background-color":"transparent"},bu={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},vu={"-webkit-mask":Fo,mask:Fo,background:jf};for(const n in vu){const e=vu[n];for(const t in bu)e[n+"-"+t]=bu[t]}function LD(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}function zD(n,e){const t=OD(yu,e),r=e.mode||"svg",i=r==="svg"?{...RD}:{};n.body.indexOf("xlink:")===-1&&delete i["xmlns:xlink"];let s=typeof e.style=="string"?e.style:"";for(let b in e){const v=e[b];if(v!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":t[b]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&MD(t,v);break;case"color":s=s+(s.length>0&&s.trim().slice(-1)!==";"?";":"")+"color: "+v+"; ";break;case"rotate":typeof v=="string"?t[b]=ND(v):typeof v=="number"&&(t[b]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete i["aria-hidden"];break;default:if(b.slice(0,3)==="on:")break;yu[b]===void 0&&(i[b]=v)}}const o=Qv(n,t),a=o.attributes;if(t.inline&&(s="vertical-align: -0.125em; "+s),r==="svg"){Object.assign(i,a),s!==""&&(i.style=s);let b=0,v=e.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),{svg:!0,attributes:i,body:nD(o.body,v?()=>v+"ID"+b++:"iconifySvelte")}}const{body:l,width:u,height:c}=n,f=r==="mask"||(r==="bg"?!1:l.indexOf("currentColor")!==-1),d=FD(l,{...a,width:u+"",height:c+""}),p={"--svg":ID(d)},m=b=>{const v=a[b];v&&(p[b]=LD(v))};m("width"),m("height"),Object.assign(p,PD,f?Fo:jf);let y="";for(const b in p)y+=b+": "+p[b]+";";return i.style=y+s,{svg:!1,attributes:i}}Mf(!0);rD("",fD);if(typeof document<"u"&&typeof window<"u"){_f();const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!Jv(r))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const r="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;iD(t,i)||console.error(r)}catch{console.error(r)}}}}function $D(n,e,t,r,i){function s(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof n=="object"&&n!==null&&typeof n.body=="string")return e.name="",s(),{data:{...vs,...n}};let o;if(typeof n!="string"||(o=bs(n,!1,!0))===null)return s(),null;const a=Kv(o);if(!a)return t&&(!e.loading||e.loading.name!==n)&&(s(),e.name="",e.loading={name:n,abort:AD([o],r)}),null;s(),e.name!==n&&(e.name=n,i&&!e.destroyed&&i(n));const l=["iconify"];return o.prefix!==""&&l.push("iconify--"+o.prefix),o.provider!==""&&l.push("iconify--"+o.provider),{data:a,classes:l}}function _D(n,e){return n?zD({...vs,...n},e):null}function Du(n){let e;function t(s,o){return s[0].svg?HD:jD}let r=t(n),i=r(n);return{c(){i.c(),e=bi()},l(s){i.l(s),e=bi()},m(s,o){i.m(s,o),Ce(s,e,o)},p(s,o){r===(r=t(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&_(e)}}}function jD(n){let e,t=[n[0].attributes],r={};for(let i=0;i<t.length;i+=1)r=vi(r,t[i]);return{c(){e=te("span"),this.h()},l(i){e=ne(i,"SPAN",{}),re(e).forEach(_),this.h()},h(){Sa(e,r)},m(i,s){Ce(i,e,s)},p(i,s){Sa(e,r=xu(t,[s&1&&i[0].attributes]))},d(i){i&&_(e)}}}function HD(n){let e,t=n[0].body+"",r=[n[0].attributes],i={};for(let s=0;s<r.length;s+=1)i=vi(i,r[s]);return{c(){e=Jf("svg"),this.h()},l(s){e=Gf(s,"svg",{});var o=re(e);o.forEach(_),this.h()},h(){wa(e,i)},m(s,o){Ce(s,e,o),e.innerHTML=t},p(s,o){o&1&&t!==(t=s[0].body+"")&&(e.innerHTML=t),wa(e,i=xu(r,[o&1&&s[0].attributes]))},d(s){s&&_(e)}}}function VD(n){let e,t=n[0]&&Du(n);return{c(){t&&t.c(),e=bi()},l(r){t&&t.l(r),e=bi()},m(r,i){t&&t.m(r,i),Ce(r,e,i)},p(r,[i]){r[0]?t?t.p(r,i):(t=Du(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:dn,o:dn,d(r){t&&t.d(r),r&&_(e)}}}function WD(n,e,t){const r={name:"",loading:null,destroyed:!1};let i=!1,s=0,o;const a=u=>{typeof e.onLoad=="function"&&e.onLoad(u),Su()("load",{icon:u})};function l(){t(3,s++,s)}return Cu(()=>{t(2,i=!0)}),Eu(()=>{t(1,r.destroyed=!0,r),r.loading&&(r.loading.abort(),t(1,r.loading=null,r))}),n.$$set=u=>{t(6,e=vi(vi({},e),xa(u)))},n.$$.update=()=>{{const u=$D(e.icon,r,i,l,a);t(0,o=u?_D(u.data,e):null),o&&u.classes&&t(0,o.attributes.class=(typeof e.class=="string"?e.class+" ":"")+u.classes.join(" "),o)}},e=xa(e),[o,r,i,s]}class Ca extends Dn{constructor(e){super(),kn(this,e,WD,VD,Cn,{})}}const qD={width:24,height:24,body:'<path fill="currentColor" d="M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42Z"/>'};var KD=qD;function UD(n){let e,t;return e=new Ca({props:{icon:KD}}),{c(){Rt(e.$$.fragment)},l(r){Pt(e.$$.fragment,r)},m(r,i){Lt(e,r,i),t=!0},p:dn,i(r){t||($e(e.$$.fragment,r),t=!0)},o(r){Xe(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}class JD extends Dn{constructor(e){super(),kn(this,e,null,UD,Cn,{})}}const GD={width:24,height:24,body:'<path fill="currentColor" d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14L6 17h12l-3.86-5.14z"/>'};var YD=GD;function XD(n){let e,t;return e=new Ca({props:{icon:YD}}),{c(){Rt(e.$$.fragment)},l(r){Pt(e.$$.fragment,r)},m(r,i){Lt(e,r,i),t=!0},p:dn,i(r){t||($e(e.$$.fragment,r),t=!0)},o(r){Xe(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}class QD extends Dn{constructor(e){super(),kn(this,e,null,XD,Cn,{})}}const ZD={width:20,height:20,body:'<path fill="currentColor" d="M16 9v8h-2V9h-4V7h10v2h-4zM8 5v12H6V5H0V3h15v2H8z"/>'};var e1=ZD;function t1(n){let e,t;return e=new Ca({props:{icon:e1}}),{c(){Rt(e.$$.fragment)},l(r){Pt(e.$$.fragment,r)},m(r,i){Lt(e,r,i),t=!0},p:dn,i(r){t||($e(e.$$.fragment,r),t=!0)},o(r){Xe(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}class n1 extends Dn{constructor(e){super(),kn(this,e,null,t1,Cn,{})}}function r1(n){let e,t,r,i,s,o,a,l,u,c,f,d,h,p,m,y,b,v;return r=new n1({}),u=new JD({}),d=new QD({}),{c(){e=te("div"),t=te("button"),Rt(r.$$.fragment),i=ot(),s=te("button"),o=$t("B"),a=ot(),l=te("button"),Rt(u.$$.fragment),c=ot(),f=te("button"),Rt(d.$$.fragment),h=ot(),p=te("input"),this.h()},l(C){e=ne(C,"DIV",{class:!0});var g=re(e);t=ne(g,"BUTTON",{class:!0});var x=re(t);Pt(r.$$.fragment,x),x.forEach(_),i=at(g),s=ne(g,"BUTTON",{class:!0});var D=re(s);o=_t(D,"B"),D.forEach(_),a=at(g),l=ne(g,"BUTTON",{class:!0});var A=re(l);Pt(u.$$.fragment,A),A.forEach(_),c=at(g),f=ne(g,"BUTTON",{class:!0});var S=re(f);Pt(d.$$.fragment,S),S.forEach(_),h=at(g),p=ne(g,"INPUT",{type:!0,class:!0}),g.forEach(_),this.h()},h(){Z(t,"class","text-xl svelte-la5ek0"),Aa(t,"active",n[0].isActive("heading",{level:1})),Z(s,"class","text-lg font-semibold p-2 leading-tight svelte-la5ek0"),Z(l,"class","p-2 svelte-la5ek0"),Z(f,"class","p-2 svelte-la5ek0"),Z(p,"type","color"),Z(p,"class","w-7 svelte-la5ek0"),p.value=m=n[0].getAttributes("textStyle").color,Z(e,"class","bg-neutral-800 text-white rounded-md shadow-md px-4 py-2 svelte-la5ek0")},m(C,g){Ce(C,e,g),J(e,t),Lt(r,t,null),J(e,i),J(e,s),J(s,o),J(e,a),J(e,l),Lt(u,l,null),J(e,c),J(e,f),Lt(d,f,null),J(e,h),J(e,p),y=!0,b||(v=[Mn(t,"click",n[4]),Mn(s,"click",n[3]),Mn(l,"click",n[1]),Mn(f,"click",n[2]),Mn(p,"input",n[5])],b=!0)},p(C,[g]){(!y||g&1)&&Aa(t,"active",C[0].isActive("heading",{level:1})),(!y||g&1&&m!==(m=C[0].getAttributes("textStyle").color))&&(p.value=m)},i(C){y||($e(r.$$.fragment,C),$e(u.$$.fragment,C),$e(d.$$.fragment,C),y=!0)},o(C){Xe(r.$$.fragment,C),Xe(u.$$.fragment,C),Xe(d.$$.fragment,C),y=!1},d(C){C&&_(e),zt(r),zt(u),zt(d),b=!1,Yf(v)}}}function i1(n){return new Promise((e,t)=>{const r=new FileReader;r.readAsDataURL(n),r.onload=()=>{e(r.result)},r.onerror=i=>{t(i)}})}function s1(n,e,t){let{editor:r}=e;const i=d=>{const h=r.getAttributes("link").href,p=window.prompt("URL",h);if(p!==null){if(p===""){r.chain().focus().extendMarkRange("link").unsetLink().run();return}r.chain().focus().extendMarkRange("link").setLink({href:p}).run()}},s=()=>{a()},o=()=>r.chain().focus().toggleBold().run();function a(){const d=document.createElement("input");d.type="file",d.accept="image/*",d.onchange=h=>{l(h)},d.click()}async function l(d){const h=d.target.files[0],p=await i1(h);u(p)}function u(d){d&&r.chain().focus().setImage({src:d}).run()}const c=()=>r.chain().focus().toggleHeading({level:1}).run(),f=d=>r.chain().focus().setColor(d.target.value).run();return n.$$set=d=>{"editor"in d&&t(0,r=d.editor)},[r,i,s,o,c,f]}class o1 extends Dn{constructor(e){super(),kn(this,e,s1,r1,Cn,{editor:0})}}const a1=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,l1=Oe.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",he(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Jc({find:a1,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),u1=dt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",he(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Xo(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),c1=Ae.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}});function ku(n){let e,t;return e=new o1({props:{editor:n[0]}}),{c(){Rt(e.$$.fragment)},l(r){Pt(e.$$.fragment,r)},m(r,i){Lt(e,r,i),t=!0},p(r,i){const s={};i&1&&(s.editor=r[0]),e.$set(s)},i(r){t||($e(e.$$.fragment,r),t=!0)},o(r){Xe(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}function f1(n){let e,t;return{c(){e=te("p"),t=$t("Select to Edit"),this.h()},l(r){e=ne(r,"P",{class:!0});var i=re(e);t=_t(i,"Select to Edit"),i.forEach(_),this.h()},h(){Z(e,"class","svelte-o13k7")},m(r,i){Ce(r,e,i),J(e,t)},p:dn,d(r){r&&_(e)}}}function d1(n){let e,t,r,i,s,o,a,l,u=n[0]&&ku(n);const c=n[5].default,f=Xf(c,n,n[4],null),d=f||f1();return{c(){e=te("div"),t=ot(),r=te("div"),u&&u.c(),i=ot(),s=te("span"),d&&d.c(),this.h()},l(h){e=ne(h,"DIV",{class:!0}),re(e).forEach(_),t=at(h),r=ne(h,"DIV",{class:!0});var p=re(r);u&&u.l(p),p.forEach(_),i=at(h),s=ne(h,"SPAN",{contenteditable:!0,style:!0,class:!0});var m=re(s);d&&d.l(m),m.forEach(_),this.h()},h(){Z(e,"class","outline-none svelte-o13k7"),Z(r,"class","svelte-o13k7"),Z(s,"contenteditable","true"),Qf(s,"visibility","hidden"),Z(s,"class","svelte-o13k7"),n[1]===void 0&&Zf(()=>n[8].call(s))},m(h,p){Ce(h,e,p),n[6](e),Ce(h,t,p),Ce(h,r,p),u&&u.m(r,null),n[7](r),Ce(h,i,p),Ce(h,s,p),d&&d.m(s,null),n[1]!==void 0&&(s.innerHTML=n[1]),o=!0,a||(l=Mn(s,"input",n[8]),a=!0)},p(h,[p]){h[0]?u?(u.p(h,p),p&1&&$e(u,1)):(u=ku(h),u.c(),$e(u,1),u.m(r,null)):u&&(ed(),Xe(u,1,1,()=>{u=null}),td()),f&&f.p&&(!o||p&16)&&nd(f,c,h,h[4],o?id(c,h[4],p,null):rd(h[4]),null),p&2&&h[1]!==s.innerHTML&&(s.innerHTML=h[1])},i(h){o||($e(u),$e(d,h),o=!0)},o(h){Xe(u),Xe(d,h),o=!1},d(h){h&&_(e),n[6](null),h&&_(t),h&&_(r),u&&u.d(),n[7](null),h&&_(i),h&&_(s),d&&d.d(h),a=!1,l()}}}function h1(n,e,t){let{$$slots:r={},$$scope:i}=e,s,o;const a=Su();let l,u;Cu(()=>{t(0,s=new qg({element:l,extensions:[kv.configure({element:u}),$v.configure({linkOnPaste:!0,protocols:["http","https","mailto"]}),l1.configure({allowBase64:!0}),c1.configure({types:["textStyle"]}),W0,u1],content:o,onTransaction:()=>{t(0,s)}})),s.on("update",({editor:h})=>{a("update",(h==null?void 0:h.getHTML())||o)}),a("editor",s),a("update",(s==null?void 0:s.getHTML())||o)}),Eu(()=>{s&&s.destroy()});function c(h){Oa[h?"unshift":"push"](()=>{l=h,t(2,l)})}function f(h){Oa[h?"unshift":"push"](()=>{u=h,t(3,u)})}function d(){o=this.innerHTML,t(1,o)}return n.$$set=h=>{"$$scope"in h&&t(4,i=h.$$scope)},[s,o,l,u,i,r,c,f,d]}class p1 extends Dn{constructor(e){super(),kn(this,e,h1,d1,Cn,{})}}function m1(n){let e,t,r,i,s,o,a;return{c(){e=te("p"),t=$t("Hello World! 🌍️"),r=ot(),i=te("p"),s=te("span"),o=$t("Highlight/Select"),a=$t(" to bring up bubble menu."),this.h()},l(l){e=ne(l,"P",{class:!0});var u=re(e);t=_t(u,"Hello World! 🌍️"),u.forEach(_),r=at(l),i=ne(l,"P",{class:!0});var c=re(i);s=ne(c,"SPAN",{class:!0});var f=re(s);o=_t(f,"Highlight/Select"),f.forEach(_),a=_t(c," to bring up bubble menu."),c.forEach(_),this.h()},h(){Z(e,"class","svelte-19jszl4"),Z(s,"class","bg-yellow-300 svelte-19jszl4"),Z(i,"class","svelte-19jszl4")},m(l,u){Ce(l,e,u),J(e,t),Ce(l,r,u),Ce(l,i,u),J(i,s),J(s,o),J(i,a)},p:dn,d(l){l&&_(e),l&&_(r),l&&_(i)}}}function g1(n){let e,t,r,i,s,o,a,l,u,c,f,d,h,p,m;return a=new p1({props:{$$slots:{default:[m1]},$$scope:{ctx:n}}}),a.$on("update",n[1]),{c(){e=te("div"),t=te("div"),r=te("h1"),i=$t("TapMenu - Svelte/Tailwind Context Menu"),s=ot(),o=te("div"),Rt(a.$$.fragment),l=ot(),u=te("div"),c=te("h1"),f=$t("Your content:"),d=ot(),h=te("pre"),p=$t(n[0]),this.h()},l(y){e=ne(y,"DIV",{class:!0});var b=re(e);t=ne(b,"DIV",{class:!0});var v=re(t);r=ne(v,"H1",{class:!0});var C=re(r);i=_t(C,"TapMenu - Svelte/Tailwind Context Menu"),C.forEach(_),s=at(v),o=ne(v,"DIV",{class:!0});var g=re(o);Pt(a.$$.fragment,g),g.forEach(_),v.forEach(_),l=at(b),u=ne(b,"DIV",{class:!0});var x=re(u);c=ne(x,"H1",{class:!0});var D=re(c);f=_t(D,"Your content:"),D.forEach(_),d=at(x),h=ne(x,"PRE",{class:!0});var A=re(h);p=_t(A,n[0]),A.forEach(_),x.forEach(_),b.forEach(_),this.h()},h(){Z(r,"class","svelte-19jszl4"),Z(o,"class","bg-neutral-200 p-2 svelte-19jszl4"),Z(t,"class","border rounded p-2 my-6 svelte-19jszl4"),Z(c,"class","svelte-19jszl4"),Z(h,"class","whitespace-pre-wrap svelte-19jszl4"),Z(u,"class","border rounded p-2 svelte-19jszl4"),Z(e,"class","p-8 svelte-19jszl4")},m(y,b){Ce(y,e,b),J(e,t),J(t,r),J(r,i),J(t,s),J(t,o),Lt(a,o,null),J(e,l),J(e,u),J(u,c),J(c,f),J(u,d),J(u,h),J(h,p),m=!0},p(y,[b]){const v={};b&4&&(v.$$scope={dirty:b,ctx:y}),a.$set(v),(!m||b&1)&&sd(p,y[0])},i(y){m||($e(a.$$.fragment,y),m=!0)},o(y){Xe(a.$$.fragment,y),m=!1},d(y){y&&_(e),zt(a)}}}function y1(n,e,t){let r="";return[r,s=>t(0,r=s.detail)]}class v1 extends Dn{constructor(e){super(),kn(this,e,y1,g1,Cn,{})}}export{v1 as default};
